<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book [
        <!-- Useful for describing APIs -->
        <!ENTITY GET    '<command xmlns="http://docbook.org/ns/docbook">GET</command>'>
        <!ENTITY PUT    '<command xmlns="http://docbook.org/ns/docbook">PUT</command>'>
        <!ENTITY POST   '<command xmlns="http://docbook.org/ns/docbook">POST</command>'>
        <!ENTITY DELETE '<command xmlns="http://docbook.org/ns/docbook">DELETE</command>'>
        <!ENTITY BATCH_DELETE '<command xmlns="http://docbook.org/ns/docbook">DELETE</command>'>
        <!ENTITY ndash "&#8211;">
        <!ENTITY mdash "&#8212;">
        
        <!-- changing authentication endpoints; define entities for US & UK rather than maintaining in text -->
        <!ENTITY ENDPOINT-US "https://identity.api.rackspacecloud.com/v1.1/">
        <!ENTITY ENDPOINT-UK "https://lon.identity.api.rackspacecloud.com/v1.1/">
        <!ENTITY ENDPOINT-US-20 "https://identity.api.rackspacecloud.com/v2.0/">
        <!ENTITY ENDPOINT-UK-20 "https://lon.identity.api.rackspacecloud.com/v2.0/">
        
        ]>
<book version="5.0" xmlns="http://docbook.org/ns/docbook"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      xml:id="clb-devguide">
    <?rax title.font.size="35px" subtitle.font.size="20px"?>
    <title>Rackspace Cloud Load Balancers Developer Guide</title>
    <titleabbrev>Rackspace Cloud LB Dev Guide</titleabbrev>
    <info>
        <author>
            <personname>
                <firstname/>
                <surname/>
            </personname>
            <affiliation>
                <orgname>Rackspace Cloud</orgname>
            </affiliation>
        </author>
        <copyright>
            <year>2010</year>
            <year>2011</year>
            <year>2012</year>
            <year>2013</year>
            <holder>Rackspace US, Inc.</holder>
        </copyright>
        <releaseinfo>API v1.0</releaseinfo>
        <productname>Rackspace Cloud Load Balancers</productname>
        <pubdate>2013-02-26</pubdate>
        <legalnotice role="rs-api">
            <annotation>
                <remark>Copyright details are filled in by the template.</remark>
            </annotation>
        </legalnotice>
        <abstract>
            <para>This document is intended for software developers interested in developing
                applications using the Rackspace Cloud Load Balancers Application Program Interface
                (<abbrev>API</abbrev>).
            </para>
        </abstract>
        <revhistory>
            <revision>
                <date>2013-02-26</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml">
                            <para>Added note about deleting a health
                                monitor of any type (refer to <xref
                                   linkend="Monitors-d1e3370"
                                />).</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2013-02-05</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml">
                            <para>Added information about request body
                                for GET and PUT requests for Content
                                Caching (refer to <xref
                                   linkend="ContentCaching-d1e3358"
                                />).</para>
                        </listitem>
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml">
                            <para>Added information about rate limits
                                and Repose (refer to <xref
                                   linkend="Limits-d1e807"/>).</para>
                        </listitem>
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml">
                            <para>Modified call to get the current
                                rate limits for the account (refer to
                                   <xref
                                   linkend="Determining_Limits_Programmatically-d1e1039"
                                />).</para>
                        </listitem>
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml">
                            <para>Added note about the authentication
                                token's expiration time being
                                formatted differently in the US and UK
                                (refer to <xref
                                   linkend="Authenticate-d1e171"/>
                                ).</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2013-01-15</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml">
                            <para>Added note about port attribute for
                                Create Load Balancer (refer to <xref
                                   linkend="Create_Load_Balancer-d1e1635"
                                />).</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2013-01-08</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml">
                            <para>Added Half-Closed support for load
                                balancers (refer to <xref
                                   linkend="Create_Load_Balancer-d1e1635"
                                /> and <xref
                                   linkend="Update_Load_Balancer_Attributes-d1e1812"
                                />).</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2012-11-20</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml">
                            <para>Updated note for specifying
                                attributes for connection throttling
                                (refer to <xref
                                   linkend="Throttle_Connections-d1e4057"
                                />).</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2012-11-08</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Updated <xref
                                   linkend="Paginated_Collections-d1e786"
                                />.</para>
                        </listitem>
                        <listitem>
                            <para>Added <code>timeout</code> option to
                                load balancer. Refer to <xref
                                   linkend="Create_Load_Balancer-d1e1635"
                                /> for the description of
                                   <code>timeout</code> and its
                                usage.</para>
                        </listitem>
                        <listitem>
                            <para>Updated Shared IPs information with
                                samples for IPv4/IPv6 combinations.
                                Refer to <xref
                                   linkend="Create_Load_Balancer-d1e1635"
                                />.</para>
                        </listitem>
                        <listitem>
                            <para>Added section for Health Monitoring
                                based logging with ATOM and API
                                formatted feeds. Refer to <xref
                                   linkend="Node-Events-d1e264"
                                />.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2012-10-25</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml">
                            <para>Updated auth response examples
                                (refer to <xref
                                   linkend="Authenticate-d1e171"
                                />).</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2012-10-09</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml"
                            xmlns:db="http://docbook.org/ns/docbook">
                            <para>Added information on pricing and
                                service level. See <xref
                                   linkend="Pricing_SLA-d1e1362"/> for
                                details.</para>
                        </listitem>
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml"
                            xmlns:db="http://docbook.org/ns/docbook">
                            <para>Corrected our date/time format from
                                RFC 822 to RFC 8601. See <xref
                                   linkend="Date_Time_Format"/> for
                                details.</para>
                        </listitem>
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml"
                            xmlns:db="http://docbook.org/ns/docbook">
                            <para>Added the ability to share UDP and
                                TCP based load balancer protocols on
                                the same port. See <xref
                                   linkend="Compatible_Load_Balancing_Protocols-d1e4269"
                                /> for details.</para>
                        </listitem>
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml"
                            xmlns:db="http://docbook.org/ns/docbook">
                            <para>Updated example for List Load
                                Balancers Response: JSON to show that
                                it returns an integer for
                                   <code>nodeCount</code> rather than
                                a string. See <xref
                                   linkend="List_Load_Balancers-d1e1367"
                                /> for details.</para>
                        </listitem>
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml"
                            xmlns:db="http://docbook.org/ns/docbook">
                            <para>Added note about proper certificate
                                ordering. See <xref
                                   linkend="SSLTermination-d1e2479"/>
                                for details.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2012-08-02</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml"
                            xmlns:db="http://docbook.org/ns/docbook">
                            <para> Updated  <xref
                                   linkend="Date_Time_Format"/>  XML
                                example for Modify Node. See <xref
                                   linkend="Modify_Nodes-d1e2503"/>
                                for details.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2012-07-27</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml"
                            xmlns:db="http://docbook.org/ns/docbook">
                            <para> Updated description for content
                                caching. See <xref
                                   linkend="ContentCaching-d1e3358"/>
                                for details.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2012-07-24</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml"
                            xmlns:db="http://docbook.org/ns/docbook">
                            <para> Updated description for SOURCE_IP
                                session persistence mode. See <xref
                                   linkend="Manage_Session_Persistence-d1e3733"
                                /> for details.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2012-07-19</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml"
                            xmlns:db="http://docbook.org/ns/docbook">
                            <para> Updated information on the
                                secondary nodes failover feature. See
                                   <xref
                                   linkend="Active_Health_Monitor-d1e336"
                                /> and <xref
                                   linkend="Monitors-d1e3370"/> for
                                details.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2012-07-17</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml">
                            <para>Updated for Auth 2.0 (refer to <xref
                                   linkend="Authentication-d1e699"
                                />).</para>
                        </listitem>
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml"
                            xmlns:db="http://docbook.org/ns/docbook">
                            <para> An optional <code>hostHeader</code>
                                field is supported for the HTTP and
                                HTTPS health monitor. See <xref
                                   linkend="Monitor_HTTP_and_HTTPS-d1e3635"
                                />.</para>
                        </listitem>
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml"
                            xmlns:db="http://docbook.org/ns/docbook">
                            <para> Added additional information on the
                                secondary nodes failover feature. See
                                   <xref
                                   linkend="Active_Health_Monitor-d1e336"
                                />, <xref
                                   linkend="Modify_Nodes-d1e2503"/>,
                                and <xref
                                   linkend="Monitor_Connections-d1e3536"
                                /> for details.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2012-06-13</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml"
                            xmlns:db="http://docbook.org/ns/docbook">
                            <para>Added tables of required/optional
                                attributes for &POST; and &PUT;
                                requests.</para>
                        </listitem>
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml"
                            xmlns:db="http://docbook.org/ns/docbook">
                            <para>Updated links for API documentation
                                (see <xref
                                   linkend="Additional_Resources-d1e207"
                                />).</para>
                        </listitem>
                        <listitem>
                            <para>Added Metadata API calls to access
                                metadata for a specified node (see
                                   <xref linkend="Metadata-d1e2173"
                                />).</para>
                        </listitem>
                        <listitem>
                            <para>Added support for content caching
                                (see <xref
                                   linkend="ContentCaching-d1e3358"
                                />).</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2012-06-06</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Updated service catalog information
                                for authentication (see <xref
                                   linkend="Authenticate-d1e171"
                                />).</para>
                        </listitem>
                        <listitem>
                            <para>Updated information for the
                                   <emphasis>nodeaddress</emphasis>
                                query parameter for finding out
                                whether any load balancer for an
                                account has a specific node attached
                                to it: the parameter can specify the
                                node using either a domain name or IP
                                address (see <xref
                                   linkend="List_Load_Balancers-d1e1367"
                                />).</para>
                        </listitem>
                        <listitem>
                            <para>Updated examples for load balancing
                                protocols to include SFTP (see <xref
                                   linkend="List_Load_Balancing_Protocols-d1e4269"
                                />).</para>
                        </listitem>
                        <listitem>
                            <para>Updated response examples for load
                                balancer usage to contain SSL data
                                (see <xref
                                   linkend="List_Usage-d1e3014"
                                />).</para>
                        </listitem>
                        <listitem>
                            <para>Added new <code>SOURCE_IP</code>
                                session persistence mode (see <xref
                                   linkend="Manage_Session_Persistence-d1e3733"
                                />).</para>
                        </listitem>
                        <listitem>
                            <para>Updated note for customers who are
                                transferring certain types of
                                Personally Identifiable Information
                                (PII) and added information for
                                x-forwarded-proto and x-forwarded-for
                                headers (see <xref
                                   linkend="SSLTermination-d1e2479"
                                />).</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2012-04-06</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>List Load Balancers call now
                                displays the node count (see <xref
                                   linkend="List_Load_Balancers-d1e1367"
                                />).</para>
                        </listitem>
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml">
                            <para>Allow users to specify primary and
                                secondary nodes for their load
                                balancers (see <xref
                                   linkend="Add_Nodes-d1e2379"
                                />).</para>
                        </listitem>
                        <listitem>
                            <para>Added API call List Allowed Domains
                                so users can see the list of allowable
                                domains (see <xref
                                   linkend="List-allowed-domains-d2f002e"
                                />).</para>
                        </listitem>
                        <listitem>
                            <para>Valid domain names can be used to
                                add nodes (see <xref
                                   linkend="Add_Nodes-d1e2379"/> and
                                   <xref
                                   linkend="List-allowed-domains-d2f002e"
                                />).</para>
                        </listitem>
                        <listitem>
                            <para>Added API call List Billable Load
                                Balancers to list an account's
                                billable load balancers for a date
                                range. (see <xref
                                   linkend="Usage_Reports-d1e3009"
                                />).</para>
                        </listitem>
                        <listitem>
                            <para>Added new protocols such as TCP
                                Client First, DNS, UDP, and MySQL (see
                                   <xref linkend="Protocols-d1e4264"
                                />).</para>
                        </listitem>
                        <listitem>
                            <para>Fixed "View Load Balancing SSL
                                Termination Configuration Response:
                                JSON" example in <xref
                                   linkend="SSLTermination-d1e2479"
                                />.</para>
                        </listitem>
                        <listitem>
                            <para>Metadata can be assigned to each
                                load balancer (see <xref
                                   linkend="Metadata-d1e2173"
                                />).</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2012-03-09</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml">
                            <para>Added note about ServiceNet in <xref
                                   linkend="Service_Access_Endpoints-d1e517"
                                />.</para>
                        </listitem>
                        <listitem>
                            <para>Added note to customers describing
                                who should not use SSL Termination in
                                   <xref
                                   linkend="SSLTermination-d1e2479"
                                />.</para>
                        </listitem>
                        <listitem>
                            <para>Corrected note below Example 4.81
                                "View Load Balancing SSL Termination
                                Configuration Response: JSON" about
                                wrapping the key/certificates in a
                                newline character in Java in <xref
                                   linkend="SSLTermination-d1e2479"
                                />.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2012-03-07</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml">
                            <para>Updated endpoints for authentication
                                for <xref linkend="request"/>.</para>
                        </listitem>
                        <listitem>
                            <para>Updated Auth Response examples for
                                   <xref linkend="Authenticate-d1e171"
                                /> to show the latest service
                                catalog.</para>
                        </listitem>
                        <listitem>
                            <para>Updated <xref
                                   linkend="Determining_Limits_Programmatically-d1e1039"
                                /> to fix limits and absolutelimits
                                API calls. </para>
                        </listitem>
                        <listitem
                            xmlns:svg="http://www.w3.org/2000/svg"
                            xmlns:m="http://www.w3.org/1998/Math/MathML"
                            xmlns:html="http://www.w3.org/1999/xhtml">
                            <para>Fixed Create Load Balancer (Required
                                Attributes) Request: XML example to be
                                consistent with the JSON example in
                                   <xref
                                   linkend="Create_Load_Balancer-d1e1635"
                                />.</para>
                        </listitem>
                        <listitem>
                            <para>Added <xref
                                   linkend="SSLTermination-d1e2479"/>
                                for new SSL termination feature.
                            </para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2012-01-27</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Deleted section 2.5.1 "Passive
                                Health Monitor (No Longer Available)"
                                since the passive health monitor has
                                been disabled.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2012-01-16</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Updated information in
                                <xref
                                        linkend="table_virtual_ip_types"/>
                                to reflect that a default IPV6 is
                                being provisioned when creating a load
                                balancer.
                            </para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2012-01-04</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Added support for Auth 1.1 in <xref
                                   linkend="Authentication-d1e699"/>. </para>
                        </listitem>
                        <listitem>
                            <para>Updated information for <xref
                                   linkend="Service_Access_Endpoints-d1e517"
                                />. </para>
                        </listitem>
                        <listitem>
                            <para>A default IPV6 is being provisioned
                                when creating a load balancer. Refer
                                to <xref
                                   linkend="table_virtual_ip_types"/>.
                                (This was turned off in Release 1.6.13
                                as a temporary mitigation strategy.) </para>
                        </listitem>
                        <listitem>
                            <para>Added <xref
                                   linkend="List_Load_Balancer_Stats-d1e1524"
                                />. </para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-11-22</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Updated information in<xref
                                    linkend="table_virtual_ip_types"
                                    />.
                            </para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-11-18</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Updated
                                <xref
                                        linkend="List_Nodes-d1e2218"/>
                                with
                                note about
                                <code>weight</code>
                                attributes.
                            </para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-11-17</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Updated section 2.5.1 "Passive
                                Health Monitor (No Longer Available)". </para>
                        </listitem>
                        <listitem>
                            <para>Added <xref
                                   linkend="Date_Time_Format"/>. </para>
                        </listitem>
                        <listitem>
                            <para>Updated
                                <xref
                                        linkend="List_Load_Balancers-d1e1367"
                                        />
                                with information for query
                                parameter
                                <emphasis>nodeaddress</emphasis>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>Added<xref
                                    linkend="Erropage-d1e666"/>.
                            </para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-10-13</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Updated examples as needed
                                to match the latest API.
                            </para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-10-11</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Updated Atom
                                examples.
                            </para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-09-26</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Updated<xref linkend="Absolute_Limits-d1e999"/>.
                            </para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-09-07</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Added basic TCP load balancing to
                                allow customers to load balance
                                traffic for any TCP-based prototcol.
                                See <xref linkend="Protocols-d1e4264"
                                />. </para>
                        </listitem>
                        <listitem>
                            <para>An X-Forwarded-For (XFF) HTTP header
                                is now automatically inserted for all
                                inbound HTTP requests. See <xref
                                   linkend="Create_Load_Balancer-d1e1635"
                                />. </para>
                        </listitem>
                        <listitem>
                            <para>Added programmatic support
                                for determining Cloud Load Balancer
                                source addresses. See
                                <xref linkend="List_Load_Balancer_Details-d1e1522"/>
                                and<xref linkend="Create_Load_Balancer-d1e1635"/>.
                            </para>
                        </listitem>
                        <listitem>
                            <para>Added support for batch delete of
                                Load Balancers, Nodes, Virtual IPs,
                                and Access List Entries. See <xref
                                   linkend="Remove_Load_Balancer-d1e2093"
                                   />,<xref
                                   linkend="Remove_Nodes-d1e2675"/>,
                                   <xref
                                   linkend="Remove_Virtual_IP-d1e2919"
                                />, and<xref
                                   linkend="Manage_Access_Lists-d1e3187"
                                />, respectively. </para>
                        </listitem>
                        <listitem>
                            <para>Updated <xref
                                   linkend="Absolute_Limits-d1e999"/>
                                and added <code>absolutelimits</code>
                                API call to <xref
                                   linkend="Determining_Limits_Programmatically-d1e1039"
                                /> to return the current absolute
                                limits for the account. </para>
                        </listitem>
                        <listitem>
                            <para>Updated examples to match the
                                current API.
                            </para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-07-08</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Added service endpoint for London (LON) region.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-07-07</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Added support for accessing the Authentication Service,
                                based on whether your account is US-based or
                                UK-based.
                            </para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-06-29</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Added support for IPv6.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-04-19</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Added details to support initial GA release.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-03-02</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Revised code samples and formatting to address initial beta feedback.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
            <revision>
                <date>2011-02-23</date>
                <revdescription>
                    <itemizedlist spacing="compact">
                        <listitem>
                            <para>Initial release for public beta.</para>
                        </listitem>
                    </itemizedlist>
                </revdescription>
            </revision>
        </revhistory>
    <raxm:metadata xmlns:raxm="http://docs.rackspace.com/api/metadata">
      <raxm:displayname>API Developer Guide</raxm:displayname>
      <raxm:product version="v1.0">loadbalancers</raxm:product>
      <raxm:priority>20</raxm:priority>
    </raxm:metadata> 
    </info>
    <chapter xml:id="Overview-d1e82">
        <title>Overview</title>
        <info>
            <raxm:metadata xmlns:raxm="http://docs.rackspace.com/api/metadata">
                <raxm:type>concept</raxm:type>
                <raxm:product version="v1.0">loadbalancers</raxm:product>
                <raxm:priority>1</raxm:priority>
            </raxm:metadata> 
        </info>
        <section xml:id="Intended_Audience-d1e87">
            <title>Intended Audience</title>
            <para>This guide is intended for software developers who want to create applications using
                the Rackspace Cloud Load Balancers API. It assumes the reader has a general understanding of
                load balancing concepts and is familiar with:
            </para>
            <para>
                <itemizedlist spacing="compact">
                    <listitem>
                        <para>ReSTful web services</para>
                    </listitem>
                    <listitem>
                        <para>HTTP/1.1 conventions</para>
                    </listitem>
                    <listitem>
                        <para>JSON and/or XML serialization formats</para>
                    </listitem>
                    <listitem>
                        <para>Atom syndication format</para>
                    </listitem>
                </itemizedlist>
            </para>
        </section>
        <section xml:id="Document_Change_History-d1e126">
            <title>Document Change History</title>
            <para>This version of the Developer Guide replaces and obsoletes all previous versions.
                The most recent changes are described in the table below:
            </para>
            <?rax revhistory?>
        </section>
        <section xml:id="Additional_Resources-d1e207">
            <title>Additional Resources</title>
            <para>You can download the most current version of this document from the Rackspace Cloud website at<link
                    xlink:href="http://docs.rackspace.com/loadbalancers/api/clb-devguide-latest.pdf">
                http://docs.rackspace.com/loadbalancers/api/clb-devguide-latest.pdf</link>.
            </para>
            <para xmlns:svg="http://www.w3.org/2000/svg"
                xmlns:m="http://www.w3.org/1998/Math/MathML"
                xmlns:html="http://www.w3.org/1999/xhtml">For
                information about getting started using Cloud Load
                Balancers and Cloud Servers, refer to
                    <citetitle>Getting Started with Rackspace Cloud
                    Load Balancers and Servers</citetitle> at<link
                    xlink:href="http://docs.rackspace.com/loadbalancers/api/clb-getting-started-latest.pdf"
                    >
                        http://docs.rackspace.com/loadbalancers/api/clb-getting-started-latest.pdf</link>.</para>
            <para>For more details about the Rackspace Cloud Load
                Balancer service, refer to <link
                    xlink:href="http://www.rackspace.com/cloud/cloud_hosting_products/loadbalancers/"
                    >http://www.rackspace.com/cloud/cloud_hosting_products/loadbalancers/</link>.
                This site also offers links to Rackspace's official
                support channels, including knowledge base articles,
                forums, phone, chat, and email. </para>
            <para>You can also follow updates and announcements via
                twitter at <link
                    xlink:href="http://www.twitter.com/Rackspace"
                    >http://www.twitter.com/Rackspace</link>.</para>
        </section>
        <section xml:id="Pricing_SLA-d1e1362"
            xmlns:svg="http://www.w3.org/2000/svg"
            xmlns:m="http://www.w3.org/1998/Math/MathML"
            xmlns:html="http://www.w3.org/1999/xhtml">
            <title>Pricing and Service Level</title>
            <para>Cloud Load Balancers is part of the Rackspace Cloud
                and your use through the API will be billed as per the
                pricing schedule at <link
                    xlink:href="http://www.rackspace.com/cloud/public/loadbalancers/pricing/"
                    >http://www.rackspace.com/cloud/public/loadbalancers/pricing/</link>. </para>
            <para>The Service Level Agreement (SLA) for Cloud Load
                Balancers is available at <link
                    xlink:href="http://www.rackspace.com/cloud/legal/sla/#cloud_load_balancers"
                    >http://www.rackspace.com/cloud/legal/sla/#cloud_load_balancers</link>.</para>
        </section>
    </chapter>
    <chapter xml:id="Concepts-d1e233">
        <?dbhtml stop-chunking?>
        <title>Concepts</title>
        <info>
            <raxm:metadata xmlns:raxm="http://docs.rackspace.com/api/metadata">
                <raxm:type>concept</raxm:type>
                <raxm:product version="v1.0">loadbalancers</raxm:product>
                <raxm:priority>2</raxm:priority>
            </raxm:metadata> 
        </info>
        <para>To use the Rackspace Cloud Load Balancers API effectively, you should understand several key
            concepts:
        </para>
        <section xml:id="Load_Balancer-d1e243">
            <title>Load Balancer</title>
            <para>A load balancer is a logical device which belongs to
                a cloud account. It is used to distribute workloads
                between multiple back-end systems or services, based
                on the criteria defined as part of its configuration. </para>
        </section>
        <section xml:id="Virtual_IP-d1e252">
            <title>Virtual IP</title>
            <para>A virtual IP is an Internet Protocol (IP) address configured on the load balancer
                for use by clients connecting to a service that is load balanced. Incoming
                connections are distributed to back-end nodes based on the configuration of the load
                balancer.
            </para>
        </section>
        <section xml:id="Erropage-d1e669">
            <title>Error Page</title>
            <para>An error page is the html file that is shown to the
                end user when an error in the service has been thrown.
                By default every virtual server is provided with the
                default error file. It is also possible to submit a
                custom error page via the Load Balancers API. Refer to
                <xref linkend="List_Errorpage-d1e2218"/>
                for
                details.
            </para>
        </section>
        <section xml:id="Node-d1e262">
            <title>Node</title>
            <para>A node is a back-end device providing a service on a specified IP and port.</para>
        </section>
        <section xml:id="Health_Monitor-d1e271">
            <title>Health Monitor</title>
            <para>A health monitor is a configurable feature of each
                load balancer. It is used to determine whether or not
                a back-end node is usable for processing a request.
                The load balancing service currently supports active
                health monitoring.
            </para>
            <section xml:id="Active_Health_Monitor-d1e336">
                <title>Active Health Monitor</title>
                <para>Active health monitoring is a technique that
                    uses synthetic transactions executed at periodic
                    intervals to determine the condition of a node.
                    One of the advantages of active health monitoring
                    is that it does not require active transactions to
                    be processed by the load balancer to determine
                    whether or not a node is suitable for handling
                    traffic. Active health monitoring is not applied
                    by default and must be enabled per load balancer.
                </para>
                <para>The active health monitor can use one of three
                    types of probes: <itemizedlist spacing="compact">
                        <listitem>
                            <para> connect </para>
                        </listitem>
                        <listitem>
                            <para> HTTP </para>
                        </listitem>
                        <listitem>
                            <para> HTTPS </para>
                        </listitem>
                    </itemizedlist> These probes are executed at
                    configured intervals; in the event of a failure,
                    the node status changes to <code>OFFLINE</code>
                    and the node will not receive traffic. If, after
                    running a subsequent test, the probe detects that
                    the node has recovered, then the node's status is
                    changed to <code>ONLINE</code> and it is capable
                    of servicing requests. </para>
                <para>If active health monitoring is enabled, a
                    customer can then specify a secondary node for
                    routing traffic in the event of a primary node
                    failure. See <xref linkend="Modify_Nodes-d1e2503"
                    /> for more information on secondary nodes.</para>
            </section>
        </section>
        <section xml:id="Session_Persistence-d1e376">
            <title>Session Persistence</title>
            <para>Session persistence is a feature of the load balancing service. It attempts to
                force subsequent connections to a service to be redirected to the same node as long
                as it is online.
            </para>
        </section>
        <section xml:id="Connection_Logging-d1e385">
            <title>Connection Logging</title>
            <para>The connection logging feature allows logs to be delivered to a Cloud Files
                account every hour. For HTTP-based protocol traffic, these are Apache-style access
                logs. For all other traffic, this is connection and transfer logging.
            </para>
        </section>
    </chapter>
    <chapter xml:id="General_API_Information-d1e395">
        <title>General API Information</title>
        <info>
            <raxm:metadata xmlns:raxm="http://docs.rackspace.com/api/metadata">
                <raxm:type>concept</raxm:type>
                <raxm:product version="v1.0">loadbalancers</raxm:product>
                <raxm:priority>2</raxm:priority>
            </raxm:metadata> 
        </info>
        <para>Ideas explained here are relevant to all operations of the API. For details of specific API operations,
            see the "API Operations" chapter.
        </para>
        <para>The Rackspace Cloud Load Balancers API is implemented using a ReSTful web service interface.
            Like other products in the Rackspace Cloud suite, the load balancing service shares a
            common token-based authentication system that allows seamless access between products
            and services.
        </para>
        <note>
            <para>All requests to authenticate and operate the service are performed using
                HTTPS on TCP port 443.
            </para>
        </note>
        <section xml:id="Authentication-d1e699"
                 xmlns:svg="http://www.w3.org/2000/svg"
                 xmlns:m="http://www.w3.org/1998/Math/MathML"
                 xmlns:html="http://www.w3.org/1999/xhtml">
            <title>Authentication</title>
            <?dbhtml stop-chunking?>
            <para>Every ReST request against the Load Balancers
                Service requires the inclusion of a specific
                authorization token, supplied by the
                    <code>X-Auth-Token</code> HTTP header. Customers
                obtain this token by first using the Rackspace Cloud
                Authentication Service and supplying valid
                authentication credentials. </para>
            <section xml:id="request">
                <title>Geographic Endpoints</title>
                <para>The Rackspace Cloud Authentication Service
                    serves as the entry point to all Rackspace Cloud
                    APIs and is itself a ReSTful web service.
                </para>
                <para>To access the Authentication Service, you must
                    know the region in which your account is based: </para>
                <itemizedlist spacing="compact">
                    <listitem>
                        <para> US-based accounts authenticate through
                                <link xlink:href="&ENDPOINT-US-20;"
                                >&ENDPOINT-US-20;</link>. </para>
                    </listitem>
                    <listitem>
                        <para> UK-based accounts authenticate through
                                <link xlink:href="&ENDPOINT-UK-20;"
                                >&ENDPOINT-UK-20;</link>. </para>
                    </listitem>
                </itemizedlist>
                <para>Your account may be based in either the US or
                    the UK; this is not determined by your physical
                    location but by the location of the Rackspace
                    retail site which was used to create your account:
                </para>
                <itemizedlist spacing="compact">
                    <listitem>
                        <para>If your account was created via <link
                                xlink:href="http://www.rackspacecloud.com"
                                >http://www.rackspacecloud.com</link>,
                            it is a US-based account. </para>
                    </listitem>
                    <listitem>
                        <para>If your account was created via <link
                                xlink:href="http://www.rackspace.co.uk"
                                >http://www.rackspace.co.uk</link>, it
                            is a UK-based account. </para>
                    </listitem>
                </itemizedlist>
                <para>If you are unsure how your account was created,
                    use the Rackspace contact information at either
                    site to ask for help.
                </para>
            </section>
            <section xml:id="Authenticate-d1e171">
                <title>Retrieving the Authentication Token</title>
                <informaltable rules="all">
                    <tbody>
                        <tr>
                            <td colspan="1">&POST; </td>
                            <td colspan="1"> v2.0/tokens </td>
                            <td colspan="4"> Authenticate to receive a
                                token and a service catalog. </td>
                        </tr>
                    </tbody>
                </informaltable>
                <simpara>Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>203</returnvalue>
                </simpara>
                <simpara>Error Response Code(s): unauthorized
                    (<errorcode>401</errorcode>), userDisabled
                    (<errorcode>403</errorcode>), badRequest
                    (<errorcode>400</errorcode>), authFault
                    (<errorcode>500</errorcode>),
                    serviceUnavailable (<errorcode>503</errorcode>)
                </simpara>
                <para> The authenticate operation provides clients with
                    an authentication token and a list of regional
                    cloud endpoints. The sample requests and responses
                    in this section illustrate a general case. In your
                    authentication request, use your own credentials
                    rather than the sample values shown here for
                        <code>username</code> and <code>apiKey</code>.
                    When you authenticate successfully, the response
                    to your authentication request will include a
                    catalog of the services to which you have
                    subscribed rather than the sample values shown
                    here.</para>
                <example>
                    <title>Auth Request for US Endpoint: XML</title>
                    <programlistingco>
                        <areaspec>
                            <area xml:id="credentials.xml.user"
                                units="linecolumn" coords="13 17"/>
                            <area xml:id="credentials.xml.key"
                                units="linecolumn" coords="14 15"/>
                        </areaspec>
                        <programlisting language="xml">
<xi:include href="samples/lb-credentials-20.xml" parse="text"/>
                        </programlisting>
                    </programlistingco>
                </example>
                <example>
                    <title>Auth Request for US Endpoint: JSON</title>
                    <programlistingco>
                        <areaspec>
                            <area xml:id="credentials.json.user"
                                units="linecolumn" coords="14 22"/>
                            <area xml:id="credentials.json.key"
                                units="linecolumn" coords="15 20"/>
                        </areaspec>
                        <programlisting language="json">
<xi:include href="samples/lb-credentials-20.json" parse="text"/>
                        </programlisting>
                    </programlistingco>
                </example>
                <calloutlist>
                    <callout arearefs="credentials.xml.user">
                        <para>The username supplied here is your
                            common Rackspace Cloud username.
                        </para>
                    </callout>
                    <callout arearefs="credentials.xml.key">
                        <para>The key is your API access key. The key
                            can be obtained from the Rackspace Cloud
                            Control Panel in the <guimenu>&lt;Your
                                Account></guimenu> / <guimenuitem>API
                                Access </guimenuitem> section (login
                            here: <link
                                xlink:href="http://mycloud.rackspace.com/"
                                >Control Panel Login</link>). </para>
                    </callout>
                </calloutlist>
                <example>
                    <title>Auth Response for US Endpoint: XML</title>
                    <programlistingco>
                        <areaspec>
                            <area xml:id="response.xml.namespaces" units="linecolumn" coords="7 9"/>
                            <area xml:id="response.xml.token" units="linecolumn" coords="15 10"/>
                            <area xml:id="response.xml.dfltregion" units="linecolumn" coords="16 67"/>
                            <area xml:id="response.xml.role" units="linecolumn" coords="17 12"/>
                            <area xml:id="response.xml.catalog" units="linecolumn" coords="22 21"/>
                            <area xml:id="response.xml.servicetype" units="linecolumn" coords="51 34"/>
                            <area xml:id="response.xml.servicename" units="linecolumn" coords="51 54"/>
                            <area xml:id="response.xml.region" units="linecolumn" coords="52 30"/>
                            <area xml:id="response.xml.tenant" units="linecolumn" coords="53 66"/>
                            <area xml:id="response.xml.url" units="linecolumn" coords="54 9"/>
                        </areaspec>
                        <programlisting language="xml"><xi:include href="samples/auth-20.xml" parse="text"/>
                        </programlisting>
                    </programlistingco>
                </example>
                <example xml:id="auth_response_json">
                    <title>Auth Response for US Endpoint: JSON</title>
                    <programlistingco>
                        <areaspec>
                            <area xml:id="response.json.namespaces" units="linecolumn" coords="200 1"/>
                            <area xml:id="response.json.token" units="linecolumn" coords="9 8"/>
                            <area xml:id="response.json.dfltregion" units="linecolumn" coords="16 45"/>
                            <area xml:id="response.json.role" units="linecolumn" coords="17 12"/>
                            <area xml:id="response.json.catalog" units="linecolumn" coords="30 8"/>
                            <area xml:id="response.json.servicetype" units="linecolumn" coords="114 16"/>
                            <area xml:id="response.json.servicename" units="linecolumn" coords="113 16"/>
                            <area xml:id="response.json.region" units="linecolumn" coords="104 24"/>
                            <area xml:id="response.json.tenant" units="linecolumn" coords="101 24"/>
                            <area xml:id="response.json.url" units="linecolumn" coords="102 24"/>
                        </areaspec>	
                        <programlisting language="json"><xi:include href="samples/auth-20.json" parse="text"/>
                        </programlisting>
                    </programlistingco>
                </example>
                <note>
                    <para>The information shown in the Auth Response
                        examples is for US-based accounts. If you
                        authenticate against the UK-endpoint for auth,
                        you will see the service catalog information
                        for UK-based accounts.</para>
                </note>
                <calloutlist>
                    <callout arearefs="response.xml.namespaces">
                        <para> In XML responses only, a list of
                            namespaces identifies API extensions that
                            add functionality to the core API. </para>
                        <para> </para>
                    </callout>
                    <callout arearefs="response.xml.token">
                        <para> This token can be presented to a
                            service as evidence of authentication.
                            Tokens are valid for a finite duration; a
                            token's default lifespan is twenty-four
                            hours. </para>
                        <para> The token's <code>expires</code>
                            attribute denotes the time after which the
                            token will automatically become invalid. A
                            token may be manually revoked before the
                            time identified by the
                                <code>expires</code> attribute;
                                <code>expires</code> predicts a
                            token's maximum possible lifespan but does
                            not guarantee that it will reach that
                            lifespan. Clients are encouraged to cache
                            a token until it expires. </para>
                        <note>
                            <para>The token's expiration time is
                                formatted differently in the US and
                                UK. These response examples show the
                                US format. For examples of the UK
                                format please refer to <link
                                   xlink:href="http://docs.rackspace.com/auth/api/v2.0/auth-client-devguide/content/POST_authenticate_v2.0_tokens_.html"
                                   >http://docs.rackspace.com/auth/api/v2.0/auth-client-devguide/content/POST_authenticate_v2.0_tokens_.html</link>.</para>
                        </note>
                        <para> </para>
                    </callout>
                    <callout arearefs="response.xml.dfltregion">
                        <para> Users can be assigned a default region so that, when there is a 
                            choice between multiple endpoints associated with a service in the 
                            user's catalog, the endpoint for the user's default region will be 
                            selected if it is available. In this example, the user's default 
                            region is DFW and several of the services in the user's catalog 
                            offer endpoints in that region and the ORD region; this user's work 
                            will be directed to the DFW region whenever possible.
                        </para>
                        <para> </para>
                    </callout>
                    <callout arearefs="response.xml.role">
                        <para> Users can be assigned multiple roles,
                            with each role providing specific
                            privileges. In this example,
                                <code>jsmith</code> is the
                            administrative user for the account,
                            holding the fully-privileged
                                <code>identity:admin</code> role.
                            Other users might hold other roles with
                            different privileges. Roles need not be
                            associated with actual job functions such
                            as Administrator, Operator, Developer,
                            Tester, or Trainer. </para>
                        <para> </para>
                    </callout>
                    <callout arearefs="response.xml.catalog">
                        <para> The service catalog lists the services
                            this user can access. In this example, the
                            user can access one database service, one
                            loadbalancing service, two compute
                            services (Cloud Servers OpenStack and
                            Cloud Servers), two object storage
                            services (Cloud Files Content Distribution
                            Network (CDN), and Cloud Files),  and one
                            DNS service. The catalog listing for each
                            service provides at least one endpoint URL
                            for that service. Other information, such
                            as regions, versions, and tenants, is
                            provided if it's relevant to this user's
                            access to this service. </para>
                        <para> </para>
                    </callout>
                    <callout arearefs="response.xml.servicetype">
                        <para> The service type attribute identifies
                            services that perform similar functions,
                            whatever those services might be named. In
                            this example, the services named
                            cloudServers and cloudServersOpenStack are
                            both identified as
                                <code>type="compute"</code>,
                            identifying them as compute services even
                            though the word "compute" does not appear
                            in their names. </para>
                        <important>
                            <para>Use service type as the primary
                                value for locating a service. If
                                multiple endpoints of the same service
                                type exist in the same region, use
                                service name as the tiebreaker.</para>
                        </important>
                        <para> </para>
                    </callout>
                    <callout arearefs="response.xml.servicename">
                        <para> The service name attribute identifies
                            each unique service in the catalog. Once a
                            service is created, its name does not
                            change. However, new services of the same
                            service type may be added to the catalog
                            with new names. </para>
                        <important>
                            <para> If you are programmatically parsing
                                an authentication response, use
                                service type rather than service name
                                as the basis for determining whether a
                                user has access to a particular kind
                                of service. Service type is stable
                                across all releases; new service types
                                may be developed, but existing service
                                types are not renamed. In this
                                example, <code>type="compute"</code>
                                identifies all the available compute
                                services, one of which is named
                                cloudServers and one of which is named
                                cloudServersOpenStack. New compute
                                service names may be added in future
                                releases; whatever the compute
                                services are named, you can always
                                recognize them by parsing for
                                   <code>type="compute"</code> in the
                                authentication response's service
                                catalog. </para>
                        </important>
                        <para> </para>
                    </callout>
                    <callout arearefs="response.xml.region">
                        <para> A service may expose endpoints in
                            different regions. Regional endpoints
                            allow clients to provision resources in a
                            manner that provides high availability. </para>
                        <para> Some services are not region-specific.
                            These services supply a single
                            non-regional endpoint and do not provide
                            access to internal URLs. </para>
                        <para> </para>
                    </callout>
                    <callout arearefs="response.xml.tenant">
                        <para> Some services recognize specification
                            of a tenant. If a service does recognize
                            tenants, the format of the tenant
                            specification is defined only by the
                            service; for details about whether and how
                            to specify a tenant, check the
                            documentation for the service you are
                            using.</para>
                        <para> </para>
                    </callout>
                    <callout arearefs="response.xml.url">
                        <para> An endpoint can be assigned public and
                            internal URLs. A public URL is accessible
                            from anywhere. Access to a public URL
                            usually incurs traffic charges. Internal
                            URLs are only accessible to services
                            within the same region. Access to an
                            internal URL is free of charge. </para>
                        <para> </para>
                    </callout>
                </calloutlist>
                <para>Authentication tokens are typically valid for 24
                    hours. Applications should be designed to
                    re-authenticate after receiving a 401
                    (Unauthorized) response from a service
                    endpoint.
                </para>
                <important>
                    <para>If you are programmatically parsing an
                        authentication response, please be aware that
                        service names are stable for the life of the
                        particular service and can be used as keys.
                        You should also be aware that a user's service
                        catalog can include multiple uniquely-named
                        services which perform similar functions. For
                        example, cloudServersOpenStack is the
                        OpenStack version of compute whereas
                        cloudServers is the legacy version of compute;
                        the same user can have access to both
                        services. In Auth 2.0, the service type
                        attribute can be used as a key by which to
                        recognize similar services; see the tip
                        below.</para>
                </important>
                <tip>
                    <para>Beginning with Auth 2.0, the service catalog
                        includes a service type attribute to identify
                        services that perform similar functions but
                        have different names; for example,
                            <code>type="compute"</code> identifies
                        compute services such as cloudServers and
                        cloudServersOpenStack. Some developers have
                        found the service type attribute to be useful
                        in parsing the service catalog. For additional
                        information on Auth 2.0 (also known as the
                        Cloud Identity Service), refer to the
                            <citetitle>Cloud Identity Client Developer
                            Guide</citetitle> at <link
                                xlink:href="http://docs.rackspace.com"
                            >http://docs.rackspace.com/</link>.</para>
                </tip>
                <para>Load balancer service endpoints are published in
                    the service catalog in the Auth response with the
                    account number, which is a required element of the
                    service endpoints. The examples shown here are for
                    authentication for US customers. Customers with
                    UK-based accounts will see different values in the
                    service catalog. Refer to the next section for
                    more information about service endpoints. </para>
            </section>
        </section>
        <section xml:id="Service_Access_Endpoints-d1e517">
            <title>Service Access/Endpoints</title>
            <para>The load balancing service is a regionalized service. It allows the caller
                to select a region into which a load balancer is to be provisioned.
            </para>
            <para>To determine which region to operate against, select
                an endpoint from the table below. Replace the sample
                account ID number,<parameter>1234</parameter>, with
                your actual account number returned as part of the
                authentication service response. You will find the
                actual account number after the final '/' in the
                    <code>publicURL</code> field returned by the
                authentication response. In <xref
                    linkend="auth_response_json"/>, the account id is
                    <code>1100111</code>, as you can see from the
                    <code>publicURL</code> field for
                    <code>cloudLoadBalancers</code>:<code
                    xmlns:svg="http://www.w3.org/2000/svg"
                    xmlns:m="http://www.w3.org/1998/Math/MathML"
                    xmlns:html="http://www.w3.org/1999/xhtml"
                    >"https://dfw.loadbalancers.api.rackspacecloud.com/v1.0/1100111"</code>.
                    <table rules="all">
                    <?dbfo keep-together="always"?>
                    <caption>Regionalized Service Endpoints</caption>
                    <thead>
                        <tr align="center">
                            <td colspan="1">Region</td>
                            <td colspan="4">Endpoint</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">Chicago (ORD)</td>
                            <td colspan="4">
                                <code>https://ord.loadbalancers.api.rackspacecloud.com/v1.0/</code><parameter>1234</parameter>/
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">Dallas/Ft. Worth (DFW) </td>
                            <td colspan="4">
                                <code>https://dfw.loadbalancers.api.rackspacecloud.com/v1.0/</code><parameter>1234</parameter>/
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">London (LON)</td>
                            <td colspan="4">
                                <code>https://lon.loadbalancers.api.rackspacecloud.com/v1.0/</code><parameter>1234</parameter>/
                            </td>
                        </tr>
                    </tbody>
                </table>
            </para>
            <para>
                <emphasis role="bold">If load balancing Cloud
                    Servers</emphasis>, you can determine the
                appropriate region to select by viewing your Cloud
                Servers list and creating a load balancer within the
                same region as the datacenter in which your Cloud
                Server resides. When your resources reside in the same
                region as your load balancer, devices are in close
                proximity to each other and can take advantage of
                ServiceNet connectivity for free data transfer between
                services. </para>
            <note xmlns:svg="http://www.w3.org/2000/svg"
                xmlns:m="http://www.w3.org/1998/Math/MathML"
                xmlns:html="http://www.w3.org/1999/xhtml">
                <para>ServiceNet is an internal Rackspace-only,
                    multi-tenant network connection within each
                    Rackspace datacenter. ServiceNet IPs are not
                    accessible via the public internet. Rackspace
                    customers may configure resources to utilize an
                    internal IP address so that traffic over the
                    ServiceNet network is not billed.</para>
            </note>
            <para>
                <emphasis role="bold">If load balancing external servers</emphasis>, you can determine the
                appropriate region to select by choosing the region that is geographically as close to your
                external servers as possible.
            </para>
        </section>
        <section xml:id="Request_Response_Types-d1e591">
            <title>Request/Response Types</title>
            <para>The Rackspace Cloud Load Balancers API supports both the JSON and XML data serialization
                formats. The request format is specified using the
                <code>Content-Type</code>
                header and is required for operations that have a request body. The response format can be
                specified in requests using either the
                <code>Accept</code>
                header or adding an
                <code>.xml</code>
                or
                <code>.json</code>
                extension to the request URI. Note that it is possible for a response to be serialized using
                a format different from the request. If no response format is specified, JSON is the default.
                If conflicting formats are specified using both an
                <code>Accept</code>
                header and a query extension, the query extension takes precedence.
            </para>
            <para>Some operations support an Atom representation that can be used to efficiently determine when
                the state of services has changed.
            </para>
            <table rules="all">
                <caption>JSON and XML Response Formats</caption>
                <thead>
                    <tr align="center">
                        <td>Format</td>
                        <td>Accept Header</td>
                        <td>Query Extension</td>
                        <td>Default</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td>JSON</td>
                        <td>application/json</td>
                        <td>.json</td>
                        <td>Yes</td>
                    </tr>
                    <tr align="left">
                        <td>XML</td>
                        <td>application/xml</td>
                        <td>.xml</td>
                        <td>No</td>
                    </tr>
                    <tr align="left">
                        <td>Atom</td>
                        <td>application/atom+xml</td>
                        <td>.atom</td>
                        <td>No</td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section xml:id="Content_Compression-d1e690">
            <title>Content Compression</title>
            <para>
                Request and response body data may be encoded with gzip compression to accelerate
                interactive performance of API calls and responses. This is controlled using the
                <code>Accept-Encoding</code>
                header in the request from the client and indicated by the
                <code>Content-Encoding</code>
                header in the server response. Unless the header is explicitly set, encoding defaults to disabled.
            </para>
            <table rules="all">
                <?dbfo keep-together="always"?>
                <caption>Encoding Headers</caption>
                <thead>
                    <tr align="center">
                        <td>Header Type</td>
                        <td>Name</td>
                        <td>Value</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td>HTTP/1.1 Request</td>
                        <td>
                            <code>Accept-Encoding</code>
                        </td>
                        <td>
                            <code>gzip</code>
                        </td>
                    </tr>
                    <tr align="left">
                        <td>HTTP/1.1 Response</td>
                        <td>
                            <code>Content-Encoding</code>
                        </td>
                        <td>
                            <code>gzip</code>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section xml:id="Persistent_Connections-d1e765">
            <title>Persistent Connections</title>
            <para>
                By default, the API supports persistent connections via
                <code>HTTP/1.1</code>
                keepalives.
                All connections will be kept alive unless the connection header is set to close.
            </para>
            <para>
                To prevent abuse, HTTP sessions have a timeout of 20 seconds before being closed.
            </para>
            <note>
                <para>
                    The server may close the connection at any time and clients should not rely on this behavior.
                </para>
            </note>
        </section>
        <section xml:id="Paginated_Collections-d1e786">
            <title>Paginated Collections</title>
            <para>To reduce load on the service, list operations will
                return a maximum limit of 100 items at a time. This is
                referred to as <emphasis>pagination</emphasis>. If a
                request supplies no limit or one that exceeds the
                configured default limit, the default is used
                instead.</para>
            <para>Pagination provides the ability to limit the size of
                the returned data as well as retrieve a specified
                subset of a large data set. Pagination has two key
                concepts: limit and marker. <emphasis>Limit</emphasis>
                is the restriction on the maximum number of items for
                that type that can be returned.
                    <emphasis>Marker</emphasis> is a reference to an
                object's id and will begin the list of paged results
                at that particular resource. In this case, the
                resource is a load balancer, so the marker will be the
                load balancer id at which to begin the list of the
                paged results. To navigate the collection, the
                    <code>limit</code> and <code>marker</code>
                parameters can be set in the URI. For example,
                    <code>?limit=10&amp;marker=1234</code> will
                display a maximum of 10 load balancers in the
                paginated results, beginning with the load balancer
                whose id is 1234.</para>
            <para>There is also an <code>offset</code> parameter that
                can be used as a count of the number of objects from
                where the paginated list will be started.</para>
            <para> If a marker beyond the end of a list is given, an
                empty list is returned. Note that list operations
                never return <returnvalue>404</returnvalue>
                (itemNotFound) faults. </para>
        </section>
        <section xml:id="Limits-d1e807">
            <title>Limits</title>
            <para>All accounts, by default, have a preconfigured set
                of thresholds (or limits) to manage capacity and
                prevent abuse of the system. The system recognizes two
                kinds of limits: rate limits and absolute limits. Rate
                limits are thresholds that are reset after a certain
                amount of time passes. Absolute limits are fixed. Rate
                limits are processed via the Repose service. Please
                refer to: <link xlink:href="www.openrepose.org">www.openrepose.org</link>. </para>
            <note>
                <para>
                    If the default limits are too low for your particular application, please contact
                    Rackspace Cloud support to request an increase. All requests require reasonable
                    justification.
                </para>
            </note>
            <section xml:id="Rate_Limits-d1e821">
                <title>Rate Limits</title>
                <para>
                    We specify rate limits in terms of both a
                    human-readable wild-card URI and a
                    machine-processable regular expression. The
                    regular expression boundary matcher '^' takes
                    effect after the root URI path. For example, the
                    regular expression
                    <code>^/v1.0/1234/loadbalancers</code>
                    would match the bolded portion of the following URI:
                    <code>https://ord.loadbalancers.api.rackspacecloud.com</code>
                    <emphasis role="bold">
                        <code>/v1.0/1234/loadbalancers</code>
                    </emphasis>
                    .
                </para>
                <table rules="all">
                    <caption>Default Rate Limits</caption>
                    <?dbfo keep-together="always"?>
                    <thead>
                        <tr align="center">
                            <td>Verb</td>
                            <td>URI</td>
                            <td>RegEx</td>
                            <td>Default Limit</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td>&GET;
                            </td>
                            <td>/v1.0/*</td>
                            <td>^/1.0/.*</td>
                            <td>5/second</td>
                        </tr>
                        <tr align="left">
                            <td>&GET;
                            </td>
                            <td>/v1.0/*</td>
                            <td>^/1.0/.*</td>
                            <td>100/minute</td>
                        </tr>
                        <tr align="left">
                            <td>&POST;
                            </td>
                            <td>/v1.0/*</td>
                            <td>^/1.0/.*</td>
                            <td>2/second</td>
                        </tr>
                        <tr align="left">
                            <td>&POST;
                            </td>
                            <td>/v1.0/*</td>
                            <td>^/1.0/.*</td>
                            <td>25/minute</td>
                        </tr>
                        <tr align="left">
                            <td>&PUT;
                            </td>
                            <td>/v1.0/*</td>
                            <td>^/1.0/.*</td>
                            <td>5/second</td>
                        </tr>
                        <tr align="left">
                            <td>&PUT;
                            </td>
                            <td>/v1.0/*</td>
                            <td>^/1.0/.*</td>
                            <td>50/minute</td>
                        </tr>
                        <tr align="left">
                            <td>&DELETE;
                            </td>
                            <td>/v1.0/*</td>
                            <td>^/1.0/.*</td>
                            <td>2/second</td>
                        </tr>
                        <tr align="left">
                            <td>&DELETE;
                            </td>
                            <td>/v1.0/*</td>
                            <td>^/1.0/.*</td>
                            <td>50/minute</td>
                        </tr>
                    </tbody>
                </table>
                <para>Rate limits are applied in order relative to the verb, going from least to most
                    specific. For example, although the threshold for &POST; to /v1.0/* is 25 per minute,
                    one cannot &POST; to /v1.0/* more than 2 times per second because the rate limit for any
                    &POST; is 2 per second. In the event you exceed the thresholds established for your account, a
                    <errorcode>413</errorcode>
                    (Rate Control) HTTP response will be returned with a
                    <code>Retry-After</code>
                    header to notify the client when they can attempt to try again.
                </para>
                <para>A request may be submitted to Cloud Support for
                    an increase in load balancer limits. Each request
                    must be approved before limits can be modified.
                    Limits may only be increased up to the maximum
                    limit (such as 50 nodes per load balancer).
                </para>
                <para>Refer to
                    <xref
                            linkend="Determining_Limits_Programmatically-d1e1039"
                            />
                    to find your current account settings for these
                    limits.
                </para>
            </section>
            <section xml:id="Absolute_Limits-d1e999">
                <title>Absolute Limits</title>
                <para>Absolute limits specify the maximum number of
                    load balancers that can exist per Cloud account
                    and the maximum number of resources that can exist
                    per load balancer. The batch delete limit is the
                    exception, since it is applied per batch delete
                    API request.
                </para>
                <para>The system applies default values for load
                    balancer account and/or resource limits that can
                    be increased by submitting a request to Cloud
                    Support. Each request must be approved internally
                    before limits can be modified.
                </para>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="2">Name</td>
                            <td colspan="3">Description</td>
                            <td colspan="1">Default Limit</td>

                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="2">LOADBALANCER_LIMIT</td>
                            <td colspan="3">Total number of load
                                balancers that can be added to a Cloud
                                account.
                            </td>
                            <td colspan="1">25</td>

                        </tr>
                        <tr align="left">
                            <td colspan="2">NODE_LIMIT</td>
                            <td colspan="3">Total number of nodes that
                                can be added to a load balancer.
                            </td>
                            <td colspan="1">25</td>

                        </tr>
                        <tr align="left">
                            <td colspan="2">IPV6_LIMIT</td>
                            <td colspan="3">Total number of IPV6
                                addresses that can be added to a load
                                balancer.
                            </td>
                            <td colspan="1">25</td>

                        </tr>
                        <tr align="left">
                            <td colspan="2">BATCH_DELETE_LIMIT</td>
                            <td colspan="3">Total number of resources
                                that can be listed per batch delete
                                request.
                            </td>
                            <td colspan="1">10</td>

                        </tr>
                        <tr align="left">
                            <td colspan="2">ACCESS_LIST_LIMIT</td>
                            <td colspan="3">Total number of network
                                items that can be added to a load
                                balancer.
                            </td>
                            <td colspan="1">100</td>

                        </tr>
                    </tbody>
                </informaltable>
                <para>Refer to
                    <xref
                            linkend="Determining_Limits_Programmatically-d1e1039"
                            />
                    to find your current account settings for these
                    limits.
                </para>
            </section>
            <section xml:id="Determining_Limits_Programmatically-d1e1039">
                <title>Determining Limits Programmatically</title>
                <para>Applications can programmatically determine
                    current rate limits and absolute limits for an
                    account using the following URIs:
                </para>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="1">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&GET;
                            </td>
                            <td colspan="1">/limits</td>
                            <td colspan="3">Return the current rate limits for the account.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&GET;
                            </td>
                            <td colspan="1"
                                >/loadbalancers/absolutelimits</td>
                            <td colspan="3">Return the current absolute limits for the account.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>These operations do not require a request body.</para>
                <example>
                    <title>List Rate Limits Response: XML</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="xml">
<xi:include href="samples/lb-limits-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Rate Limits Response: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-limits-response.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Absolute Limits Response: XML</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="xml">
<xi:include href="samples/lb-absolute-limits-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Absolute Limits Response: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-absolute-limits-response.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
        </section>
        <section xml:id="Faults-d1e1140">
            <title>Faults</title>
            <para>API calls that return an error return one of the following fault objects. All
                fault objects extend from the base fault,<code>serviceFault</code>, for easier
                exception handling for languages that support it.
            </para>
            <section xml:id="serviceFault-d1e1151">
                <title>
                    serviceFault
                </title>
                <para>
                    The
                    <code>serviceFault</code>
                    and by extension all other faults include
                    <code>message</code>
                    and
                    <code>detail</code>
                    elements which contain strings describing the nature of the fault
                    as well as a
                    <code>code</code>
                    attribute representing the HTTP response code for convenience.
                    The
                    <code>code</code>
                    attribute of the fault is for the convenience of the caller so that they may retrieve the response
                    code from the HTTP response headers
                    or directly from the fault object if they choose.
                    The caller should not expect the
                    <code>serviceFault</code>
                    to be returned directly but should instead expect only one of the child faults to be returned.
                </para>
            </section>
            <section xml:id="badRequest-d1e1179">
                <title>
                    badRequest
                </title>
                <para>This fault indicates that the data in the request object is invalid; for example,
                    a string was used in a parameter that was expecting an integer. The fault will wrap
                    validation errors.
                </para>
                <example>
                    <title>Fault Response, badRequest</title>
                    <?dbfo keep-together="always"?>
                    <literallayout class="monospaced">
<![CDATA[<badRequest xmlns="http://docs.openstack.org/loadbalancers/api/v1.0" code="400">
    <message>Validation fault</message>
    <details>The object is not valid</details>
        <validationErrors>
            <message>Node ip is invalid. Please specify a valid ip.</message>
        </validationErrors>
</badRequest>]]>
                    </literallayout>
                </example>
            </section>
            <section xml:id="immutableEntity-d1e1197">
                <title>
                    immutableEntity
                </title>
                <para>
                    This fault is returned when a user attempts to modify an item that is not currently in a state
                    that allows modification. For example, load balancers in a status of
                    <code>PENDING_UPDATE</code>,<code>BUILD</code>, or
                    <code>DELETED</code>
                    may not be modified.
                </para>
                <example>
                    <title>Fault Response, immutableEntity</title>
                    <literallayout class="monospaced">
<![CDATA[<immutableEntity code="422" xmlns="http://docs.openstack.org/loadbalancers/api/v1.0">
    <message>The object at the specified URI is immutable and can not be overwritten.</message>
</immutableEntity>]]>
                    </literallayout>
                </example>
            </section>
            <section xml:id="itemNotFound-d1e1225">
                <title>
                    itemNotFound
                </title>
                <example>
                    <title>Fault Response, itemNotFound</title>
                    <literallayout class="monospaced">
<![CDATA[<itemNotFound code="404" xmlns="http://docs.openstack.org/loadbalancers/api/v1.0">
    <message>Object not Found</message>
</itemNotFound>]]>
                    </literallayout>
                </example>
            </section>
            <section xml:id="loadBalancerFault-d1e1240">
                <title>
                    loadBalancerFault
                </title>
                <para>The
                    <code>loadBalancerFault</code>
                    fault shall
                    be returned in the event that an error occurred
                    during a load balancer operation.
                </para>
                <example>
                    <title>Fault Response, loadBalancerFault</title>
                    <literallayout class="monospaced">
<![CDATA[<loadBalancerFault code="401" xmlns="http://docs.openstack.org/loadbalancers/api/v1.0">
    <message>Invalid authentication token. Please renew</message>
</loadBalancerFault>]]>
                    </literallayout>
                </example>
            </section>
            <section xml:id="outOfVirtualIps-d1e1261">
                <title>
                    outOfVirtualIps
                </title>
                <para>This fault indicates that there are no virtual IPs left to assign to a new
                    load balancer. In practice, this fault should not occur, as virtual IPs will be
                    ordered as capacity is required. If you do experience this fault, contact support so
                    that we may make more IPs available.
                </para>
                <example>
                    <title>Fault Response, outOfVirtualIps</title>
                    <literallayout class="monospaced">
<![CDATA[<outOfVirtualIps code="500" xmlns="http://docs.openstack.org/loadbalancers/api/v1.0">
    <message>
        Out of virtual IPs. Please contact support so they can allocate more virtual IPs.
    </message>
</outOfVirtualips>]]>
                    </literallayout>
                </example>
            </section>
            <section xml:id="overLimit-d1e1279">
                <title>
                    overLimit
                </title>
                <para>
                    This fault is returned when the user has exceeded a currently allocated limit.
                </para>
                <example>
                    <title>Fault Response, overLimit</title>
                    <literallayout class="monospaced">
<![CDATA[<overLimit code="413" xmlns="http://docs.openstack.org/loadbalancers/api/v1.0">
    <message>Your account is currently over the limit so your request could not be processed.</message>
</overLimit>]]>
                    </literallayout>
                </example>
            </section>
            <section xml:id="serviceUnavailable-d1e1297">
                <title>
                    serviceUnavailable
                </title>
                <para>
                    This fault is returned when the service is unavailable, such as when the service is undergoing
                    maintenance. Note that this does not necessarily mean that the currently configured loadbalancers
                    are unable to process traffic; it simply means that the API is currently unable to service
                    requests.
                </para>
                <example>
                    <title>Fault Response, serviceUnavailable</title>
                    <?dbfo keep-together="always"?>
                    <literallayout class="monospaced">
<![CDATA[<serviceUnavailable code="500" xmlns="http://docs.openstack.org/loadbalancers/api/v1.0">
    <message>The Load balancing service is currently not available</message>
</serviceUnavailable>]]>
                    </literallayout>
                </example>
            </section>
            <section xml:id="unauthorized-d1e1315">
                <title>
                    unauthorized
                </title>
                <para>
                    This fault is returned when the user is not authorized to perform an attempted operation.
                </para>
                <example>
                    <title>Fault Response, unauthorized</title>
                    <?dbfo keep-together="always"?>
                    <literallayout class="monospaced">
<![CDATA[<unauthorized code="404" xmlns="http://docs.openstack.org/loadbalancers/api/v1.0">
    <message>You are not authorized to execute this operation.</message>
</unauthorized>]]>
                    </literallayout>
                </example>
            </section>
            <section xml:id="unprocessableEntity-d1e1334">
                <title>
                    unprocessableEntity
                </title>
                <para>
                    This fault is returned when an operation is requested on an item that does not support the
                    operation, but the request is properly formed.
                </para>
                <example>
                    <title>Fault Response, unprocessableEntity</title>
                    <literallayout class="monospaced">
<![CDATA[<unprocessableEntity code="422" xmlns="http://docs.openstack.org/loadbalancers/api/v1.0">
    <message>The Object at the specified URI is unprocessable.</message>
</unprocessableEntity>]]>
                    </literallayout>
                </example>
            </section>
        </section>
        <section xmlns:svg="http://www.w3.org/2000/svg"
                 xmlns:m="http://www.w3.org/1998/Math/MathML"
                 xmlns:html="http://www.w3.org/1999/xhtml" xml:id="Date_Time_Format">
            <title>Date/Time Format</title>
            <para>The Load Balancer service uses an ISO 8601 compliant
                date format for the display and consumption of
                date/time values. </para>
            <example>
                <title>Load Balancer Service Date/Time Format</title>
                <programlisting>yyyy-MM-dd'T'HH:mm:ssZ</programlisting>
                <para>See the table below for a description of the
                    date/time format codes.
                </para>
                <para>May 19th, 2011 at 8:07:08 AM, GMT-5 would have
                    the following format:
                </para>
                <programlisting>2011-05-19T08:07:08-05:00</programlisting>
            </example>
            <table rules="all">
                <caption>Explanation of Date/Time Format
                    Codes
                </caption>
                <thead>
                    <tr>
                        <td>Code</td>
                        <td>Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>yyyy</td>
                        <td>Four digit year</td>
                    </tr>
                    <tr>
                        <td>MM</td>
                        <td>Two digit month</td>
                    </tr>
                    <tr>
                        <td>dd</td>
                        <td>Two digit day of month</td>
                    </tr>
                    <tr>
                        <td>T</td>
                        <td>Separator for date/time</td>
                    </tr>
                    <tr>
                        <td>HH</td>
                        <td>Two digit hour of day (00-23)</td>
                    </tr>
                    <tr>
                        <td>mm</td>
                        <td>Two digit minutes of hour</td>
                    </tr>
                    <tr>
                        <td>ss</td>
                        <td>Two digit seconds of the minute</td>
                    </tr>
                    <tr>
                        <td>Z</td>
                        <td>RFC 8601 timezone (offset from GMT). If Z
                            is not replaced with the offset from GMT,
                            it indicates a <code>00:00</code>
                            offset.</td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section xml:id="Compatible_Load_Balancing_Protocols-d1e4269">
                <title>Compatible Shared Load Balancing
                Protocols</title>

                <para>Load balancers utilizing shared Virtual IPs must
                select <emphasis>unique</emphasis> ports unless the
                load balancer protocols used are designed to work
                together on the same port. This section provides
                information on the compatible load balancer protocols
                that are designed to share UDP and TCP based protocols
                on the same port. </para>

                <note>
                    <para>Only a select set of protocols are allowed
                    to share the same port across shared load
                    balancers. </para>
                </note>
                <para>See the tables below for the descriptions of
                these protocols. </para>
            <para>The first of these tables lists the DNS compatible
                load balancing protocols:</para>
                <table rules="all">
                    <caption>DNS Compatible Load Balancing Protocols</caption>
                    <thead>
                        <tr align="center">
                            <td colspan="2">Name</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="2">
                                <code>DNS_TCP</code>
                            </td>
                            <td colspan="3">This protocol works with
                                IPv6 and allows your DNS server to
                                receive traffic using TCP port 53.
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>DNS_UDP</code>
                            </td>
                            <td colspan="3">This protocol works with
                                IPv6 and allows your DNS server to
                                receive traffic using UDP port
                                53.
                            </td>
                        </tr>
                    </tbody>
                </table>
                <note>
                    <para>The TCP and UDP protocols listed in the
                    table above are compatible and good for load
                    balancing DNS based applications. These
                        <emphasis>cannot</emphasis> be combined with
                    the TCP and UDP protocols listed in the tables
                    below. </para>
                </note>
            <para>The TCP and UDP protocols listed in the following
                tables are compatible for sharing TCP and UDP based
                protocols on the same port. These protocols can be
                interchanged to achieve the proper setup for the
                user's TCP/UDP based application.</para>

                <table rules="all">
                    <caption>TCP Compatible Load Balancing Protocols</caption>

                    <thead>
                        <tr align="center">
                            <td colspan="2">Name</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="2">
                                <code>TCP</code>
                            </td>
                            <td colspan="3">The Transmission Control
                            Protocol (TCP) is a part of the Transport
                            Layer Protocol and is one of the core
                            protocols of the Internet Protocol Suite.
                            It provides a reliable, ordered delivery
                            of a stream of bytes from one program on a
                            computer to another program on another
                            computer. Applications that require an
                            ordered and reliable delivery of packets
                            use this protocol. </td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>TCP_CLIENT_FIRST</code>
                            </td>
                            <td colspan="3">This protocol is similar
                            to TCP, but is more efficient when a
                            client is expected to write the data
                            first. </td>
                        </tr>
                    </tbody>
                </table>

                <table rules="all">
                    <caption>UDP Compatible Load Balancing Protocols</caption>
                    <thead>
                        <tr align="center">
                            <td colspan="2">Name</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="2">
                                <code>UDP</code>
                            </td>
                            <td colspan="3">TheUser Datagram Protocol
                            (UDP) provides a datagram service
                            thatemphasizes speed over reliability. It
                            works well with applications that provide
                            security through other measures. </td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>UDP_STREAM</code>
                            </td>
                            <td colspan="3">This protocol is designed
                                to stream media over networks and is
                                built on top of UDP.
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>
    </chapter>
    <chapter xml:id="API_Operations-d1e1354">
        <title>API Operations</title>
        <info>
            <raxm:metadata xmlns:raxm="http://docs.rackspace.com/api/metadata">
                <raxm:type>apiref</raxm:type>
                <raxm:product version="v1.0">loadbalancers</raxm:product>
                <raxm:priority>1</raxm:priority>
            </raxm:metadata> 
        </info>
        <para>This chapter explains specific API operations. For ideas relevant to all API operations, see the "General
            API Information" chapter.
        </para>
        <section xml:id="Load_Balancers-d1e1362">
            <title>Load Balancers</title>
            <section xml:id="List_Load_Balancers-d1e1367">
                <title>List Load Balancers</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                            <td colspan="2">Representation</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&GET;
                            </td>
                            <td colspan="3">/loadbalancers</td>
                            <td colspan="3">List all <glossterm baseform="load balancer">load balancers</glossterm> configured for the account (IDs, names and
                                status only).
                            </td>
                            <td colspan="2">XML, JSON, Atom</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>This operation provides a list of all load
                    balancers configured and associated with your
                    account.
                </para>
                <para>A limited set of load balancer attributes
                    including the following are returned in the
                    response object:
                </para>
                <itemizedlist spacing="compact">
                    <listitem>
                        <para>
                            <code>name</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code>id</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code>status</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code>created</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code>updated</code>
                        </para>
                    </listitem>
                </itemizedlist>
                <para>This operation does not require a request body.</para>
                <para>List load balancer example responses are shown
                    below:
                </para>
                <example>
                    <title>List Load Balancers Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Load Balancers Response: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-list-response.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Atom Load Balancers Response:
                        XML
                    </title>
                    <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-loadbalancer.xml" parse="text"/>
                    </programlisting>
                </example>
                <para>A
                    <emphasis>changes-since</emphasis>
                    query
                    parameter is supported that lists all load
                    balancers that have changed since the specified
                    date/time. For example, using the URI
                    <code>/loadbalancers?changes-since=2011-05-19T08:07:08-0500</code>
                    lists all load balancers that have changed since
                    May 19th, 2011 at 8:07:08 AM, GMT-5. Refer to
                    <xref linkend="Date_Time_Format"/>
                    for
                    information about specifying the date/time.
                </para>
                <para>To view deleted load balancers, add the query
                    parameter
                    <code>?status=DELETED</code>
                    to the end
                    of the URI. A deleted load balancer is immutable
                    and irrecoverable.
                </para>
                <para>To find out if any load balancer for an account has
                    a specific <glossterm>node</glossterm> attached to it, use the query
                    parameter
                    <emphasis>nodeaddress</emphasis>
                    to
                    specify the IP address or domain name for the desired
                    node. For example, using the URI
                    <code>/loadbalancers?nodeaddress=10.1.1.1</code>
                    will search all load balancers for the account for
                    a node with IP address 10.1.1.1, and return a list
                    including the id, name, and status of all load
                    balancers attached:
                </para>
                <example>
                    <title>List Load Balancers With Node Specified: XML
                    </title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-response-with-node.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Load Balancers With Node Specified:
                        JSON
                    </title>
                    <programlisting language="json">
<xi:include href="samples/lb-list-response-with-node.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
            <section xml:id="List_Load_Balancer_Details-d1e1522">
                <title>List Load Balancer Details</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                            <td colspan="2">Representations</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&GET;
                            </td>
                            <td colspan="3"
                                   >/loadbalancers/<parameter>loadBalancerId</parameter>
                            </td>
                            <td colspan="3">List details of the specified load balancer.</td>
                            <td colspan="2">JSON, XML, Atom</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>This operation provides detailed output for a specific load balancer
                    configured and associated with your account. This operation is not capable of
                    returning details for a load balancer which has been deleted.
                </para>
                <para>
                    This operation does not require a request body.
                </para>
                <para>Notice in the following examples that API users
                    are now able to programmatically derive the source
                    IP addresses of our load balancers using the
                    <code>sourceAddresses</code>
                    label included at
                    the bottom of the list load balancer details
                    response. This feature is useful for customers who
                    are automating the deployment of infrastructure
                    and need to determine the IP addresses of requests
                    coming from our load balancers for the purpose of
                    creating more robust firewall rules.
                </para>
                <example>
                    <title>List Load Balancer Details Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-details-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Load Balancers Details Response: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-list-details-response.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Atom Load Balancer Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-loadbalancer-id.xml" parse="text"/>
                    </programlisting>
                </example>
            </section>
            <section xml:id="Create_Load_Balancer-d1e1635">
                <title>Create Load Balancer</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&POST;
                            </td>
                            <td colspan="3">/loadbalancers</td>
                            <td colspan="3">Create a new load balancer with the configuration defined by the request.
                            </td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>This operation asynchronously provisions a new load
                    balancer based on the configuration defined in the
                    request object. Once the request is validated and
                    progress has started on the provisioning process,
                    a response object will be returned. The object
                    will contain a unique identifier and status of the
                    request. Using the identifier, the caller can
                    check on the progress of the operation by
                    performing a &GET; on
                    <code>loadbalancers/id</code>. If the
                    corresponding request cannot be fulfilled due to
                    insufficient or invalid data, an
                    <code>HTTP</code>
                    <returnvalue>400 (Bad Request)</returnvalue>
                    error
                    response will be returned with information
                    regarding the nature of the failure in the body of
                    the response. Failures in the validation process
                    are non-recoverable and require the caller to
                    correct the cause of the failure and &POST; the
                    request again.
                </para>
                <para>An HTTP load balancer will have the
                    X-Forwarded-For (XFF) HTTP header set by default.
                    This header will contain the actual originating IP
                    address of a client connecting to a web server
                    through an HTTP proxy or load balancer, which many
                    web applications are already designed to use when
                    determining the source address for a request.
                    (This header is also included on the Modify Load
                    Balancer request if the protocol changes to
                    reenable it.) </para>
                <para>An HTTP load balancer will also include the
                    X-Forwarded-Proto (XFP) HTTP header,  which has
                    been added for identifying the originating
                    protocol of an HTTP request as "http" or "https"
                    depending on what protocol the client requested.
                    This is specially useful when using SSL
                    termination (refer to <xref
                        linkend="SSLTermination-d1e2479"/>). </para>
                <para>The following table lists the required and
                    optional attributes for Create Load
                    Balancer:</para>
                
                <table rules="all">
                    <caption>Required and Optional Attributes for
                        Create Load Balancer</caption>
                    <thead>
                        <tr>
                            <td colspan="1">Name </td>
                            <td colspan="3">Description</td>
                            <td colspan="1">Required</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="1">name</td>
                            <td colspan="3">Name of the load balancer
                                to create. The name must be 128
                                characters or less in length, and all
                                UTF-8 characters are valid. Refer to
                                   <link
                                   xlink:href="http://www.utf8-chartable.de/"
                                   >
                                   http://www.utf8-chartable.de/</link>
                                for information about the UTF-8
                                character set. Refer to the request
                                examples in this section for the
                                required xml/json format.</td>
                            <td colspan="1">Yes</td>
                        </tr>
                        <tr>
                            <td colspan="1">nodes</td>
                            <td colspan="3">Nodes to be added to the
                                load balancer. Refer to the request
                                examples in this section for the
                                required xml/json format.</td>
                            <td colspan="1">Yes</td>
                        </tr>
                        <tr>
                            <td colspan="1">protocol</td>
                            <td colspan="3">Protocol of the service
                                which is being load balanced. Refer to
                                   <xref linkend="Protocols-d1e4264"/>
                                for a table of available
                                protocols.</td>
                            <td colspan="1">Yes</td>
                        </tr>
                        <tr>
                            <td colspan="1">halfClosed</td>
                            <td colspan="3">Enable or Disable
                                Half-Closed support for the load
                                balancer. Half-Closed support provides
                                the ability for one end of the
                                connection to terminate its output,
                                while still receiving data from the
                                other end. Only available for
                                TCP/TCP_CLIENT_FIRST protocols.</td>
                            <td colspan="1">No</td>
                        </tr>
                        <tr>
                            <td colspan="1">virtualIps</td>
                            <td colspan="3">Type of virtualIp to add
                                along with the creation of a load
                                balancer. See the Virtual IP Types
                                table below for the Virtual IP
                                Types.</td>
                            <td colspan="1">Yes</td>
                        </tr>
                    
                        <tr>
                            <td colspan="1">accessList</td>
                            <td colspan="3">The access list management
                                feature allows fine-grained network
                                access controls to be applied to the
                                load balancer's virtual IP address.
                                Refer to the request examples in <xref
                                   linkend="Access_Lists-d1e3160"/>
                                for the required xml/json format.</td>
                            <td colspan="1">No</td>
                        </tr>
                        <tr>
                            <td colspan="1">algorithm</td>
                            <td colspan="3">Algorithm that defines how
                                traffic should be directed between
                                back-end nodes. Refer to the request
                                examples in <xref
                                   linkend="Algorithms-d1e4367"/> for
                                the required xml/json format.</td>
                            <td colspan="1">No</td>
                        </tr>
                        <tr>
                            <td colspan="1">connectionLogging</td>
                            <td colspan="3">Current connection logging
                                configuration. Refer to the request
                                examples in <xref
                                   linkend="Log_Connections-d1e3924"/>
                                for the required xml/json format.</td>
                            <td colspan="1">No</td>
                        </tr>
                    
                        <tr>
                            <td colspan="1">connectionThrottle</td>
                            <td colspan="3">Specifies limits on the
                                number of connections per IP address
                                to help mitigate malicious or abusive
                                traffic to your applications. Refer to
                                the request examples in <xref
                                   linkend="Throttle_Connections-d1e4057"
                                /> for the required xml/json
                                format.</td>
                            <td colspan="1">No</td>
                        </tr>
                        <tr>
                            <td colspan="1">healthMonitor</td>
                            <td colspan="3">The type of health monitor
                                check to perform to ensure that the
                                service is performing properly. Refer
                                to the request examples in <xref
                                   linkend="Monitor_Health-d1e3434"/>
                                for the required xml/json format.</td>
                            <td colspan="1">No</td>
                        </tr>
                        <tr>
                            <td colspan="1">metadata</td>
                            <td colspan="3">Information (metadata)
                                that can be associated with each load
                                balancer for the client's personal
                                use. Refer to the request examples in
                                   <xref
                                   linkend="Add_Metadata-d1e2379"/>
                                for the required xml/json format.</td>
                            <td colspan="1">No</td>
                        </tr>
                        <tr>
                            <td colspan="1">port</td>
                            <td colspan="3">Port number for the
                                service you are load balancing.</td>
                            <td colspan="1">Refer to Notes below
                                table</td>
                        </tr>
                        <tr>
                            <td colspan="1">timeout</td>
                            <td colspan="3">The timeout value for the
                                load balancer and communications with
                                its nodes. Defaults to 30 seconds with
                                a maximum of 120 seconds. </td>
                            <td colspan="1">No</td>
                        </tr>
                        <tr>
                            <td colspan="1">sessionPersistence</td>
                            <td colspan="3">Specifies whether multiple
                                requests from clients are directed to
                                the same node. Refer to the request
                                examples in <xref
                                   linkend="Manage_Session_Persistence-d1e3733"
                                /> for the required xml/json
                                format.</td>
                            <td colspan="1">No</td>
                        </tr>
                    </tbody>
                </table>
                
                <note>
                     <title>Notes</title>
                    <itemizedlist>
                        <listitem><para>Users may configure all documented features of the load balancer
                                at creation time by simply providing
                                the additional elements or attributes
                                in the request. This document provides
                                an overview of all the features the
                                load balancing service supports. </para>
                        </listitem>
                        <listitem><para>Any protocol that is not listed in the List Load Balancing
                                Protocols Response (see <xref
                                   linkend="List_Load_Balancing_Protocols-d1e4269"
                                />), or is in the list but port=0,
                                requires port to be set. For example
                                the TCP protocol is in the list,
                                however it specifies port as 0
                                   (<code>&lt;protocol name="TCP"
                                   port="0" /&gt;</code>), therefore
                                it requires port to be set. </para></listitem>
                    </itemizedlist>
                    
                </note>
                <para> You must specify the type of virtualIp to add
                    along with the creation of a load balancer. The
                    following table describes the options. </para>
                <table rules="all" xml:id="table_virtual_ip_types">
                    <caption>Virtual IP Types</caption>
                    <thead align="center">
                        <tr>
                            <td>Version</td>
                            <td>Type</td>
                            <td>Outcome</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td>Not Specified</td>
                            <td>PUBLIC</td>
                            <td>IPV4 &amp; IPV6</td>
                        </tr>
                        <tr align="left">
                            <td>IPV4</td>
                            <td>PUBLIC</td>
                            <td>IPV4</td>
                        </tr>
                        <tr align="left">
                            <td>IPV6</td>
                            <td>PUBLIC</td>
                            <td>IPV6</td>
                        </tr>
                        <tr align="left">
                            <td>Not Specified</td>
                            <td>SERVICENET</td>
                            <td>IPV4</td>
                        </tr>
                        <tr align="left">
                            <td>IPV4</td>
                            <td>SERVICENET</td>
                            <td>IPV4</td>
                        </tr>
                        <tr align="left">
                            <td>IPV6</td>
                            <td>SERVICENET</td>
                            <td>Failure Message</td>
                        </tr>
                    </tbody>
                </table>
                
                <example>
                    <title>Create Load Balancer (Required Attributes) Request: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-create-required-request.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Create Load Balancer (Required Attributes) Request: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-create-required-request.json" parse="text"/>
                    </programlisting>
                </example>
                <para>Notice in the following examples that API users
                    are now able to programmatically derive the source
                    IP addresses of our load balancers using the
                    <code>sourceAddresses</code>
                    label included at
                    the bottom of the create load balancer (required
                    attributes) response. This feature is useful for
                    customers who are automating the deployment of
                    infrastructure and need to determine the IP
                    addresses of requests coming from our load
                    balancers for the purpose of creating more robust
                    firewall rules.
                </para>
                <example>
                    <title>Create Load Balancer (Required Attributes) Response: XML</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="xml">
<xi:include href="samples/lb-create-required-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Create Load Balancer (Required Attributes) Response: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-create-required-response.json" parse="text"/>
                    </programlisting>
                </example>
                <para>To conserve IPv4 address space, Rackspace highly
                    recommends sharing Virtual IPs between your load
                    balancers. If you have at least one load balancer,
                    you may create subsequent load balancers that
                    share a single virtual IPv4 and/or a single IPv6
                    by issuing a &POST; and supplying a virtual IP ID
                    instead of a type. Additionally, this feature is
                    highly desirable if you wish to load balance both
                    an unsecured and secure protocol using one IP or
                    DNS name. For example, this method makes it
                    possible to use the same load balancing
                    configuration to support <code>HTTP</code> and
                        <code>HTTPS</code>. </para>
                <note>
                    <title>Notes</title>
                    <itemizedlist>
                        <listitem>
                            <para>Load balancers sharing a Virtual IP
                                   <emphasis>must</emphasis> utilize a
                                unique port. Also, to share both an
                                IPv4 as well as an IPv6, you must
                                supply an extra <code>virtualIp</code>
                                object to the <code>virtualIps</code>
                                container with the desired
                                   <code>ID</code> being shared. </para>
                        </listitem>
                        <listitem>
                            <para>In addition, load balancers sharing
                                Virtual IPs can utilize certain
                                compatible TCP/UDP and DNS based
                                protocols on the same port. Please see
                                   <xref
                                   linkend="Compatible_Load_Balancing_Protocols-d1e4269"
                                /> for more details.</para>
                        </listitem>
                    </itemizedlist>
                </note>
                <example>
                    <title>Create Load Balancer (Required Attributes with Shared IP) Request: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-create-required-sharedip-request.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Create Load Balancer (Required Attributes with Shared IP) Request: JSON</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="json">
<xi:include href="samples/lb-create-required-sharedip-request.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Create Load Balancer (Required Attributes with Shared IP) Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-create-required-sharedip-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Create Load Balancer (Required Attributes with Shared IP) Response:
                        JSON
                    </title>
                    <programlisting language="json">
<xi:include href="samples/lb-create-required-sharedip-response.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Create Load Balancer (Required Attributes with Shared IPV4 and IPV6) Request: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-create-required-shared-ipv4-ipv6-request.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Create Load Balancer (Required Attributes with Shared IPV4 and IPV6) Request: JSON</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="json">
<xi:include href="samples/lb-create-required-shared-ipv4-ipv6-request.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Create Load Balancer (Required Attributes with Shared IPV4 and IPV6) Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-create-required-shared-ipv4-ipv6-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Create Load Balancer (Required Attributes with Shared IPV4 and IPV6) Response:
                        JSON
                    </title>
                    <programlisting language="json">
<xi:include href="samples/lb-create-required-shared-ipv4-ipv6-response.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
            <section xml:id="Update_Load_Balancer_Attributes-d1e1812">
                <title>Update Load Balancer Attributes</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&PUT;
                            </td>
                            <td colspan="3"
                                   >/loadbalancers/<parameter>loadBalancerId</parameter>
                            </td>
                            <td colspan="3">Update the properties of a load balancer.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>This operation asynchronously updates the attributes of the specified load
                    balancer. Upon successful validation of the request, the service will return a
                    <returnvalue>202 (Accepted)</returnvalue>
                    response code. A caller can poll
                    the load balancer with its ID to wait for the changes to be applied and the load
                    balancer to return to an
                    <code>ACTIVE</code>
                    status.
                </para>
                <para>
                    This operation allows the caller to change one or more of the following attributes:
                </para>
                <itemizedlist spacing="compact">
                    <listitem>
                        <para>
                            <code>name</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code>algorithm</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code>protocol</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code>halfClosed</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code>port</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            <code>timeout</code>
                        </para>
                    </listitem>
                </itemizedlist>
                <para>
                    This operation does not return a response body.
                </para>
                <note>
                    <para>
                        The load balancer's ID and status are immutable attributes and cannot be modified by the
                        caller. Supplying an unsupported attribute will result in a
                        <returnvalue>400 (badRequest)</returnvalue>
                        fault.
                    </para>
                </note>
                <para>The following table lists the required and
                    optional attributes for Update Load Balancer
                    Attributes:</para>
                <table rules="all">
                    <caption>Required and Optional Attributes for
                        Update Load Balancer Attributes</caption>
                    <thead>
                        <tr>
                            <td colspan="1">Name </td>
                            <td colspan="3">Description</td>
                            <td colspan="1">Required</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="1">name</td>
                            <td colspan="3">Name of the load balancer
                                to create. The name must be 128
                                characters or less in length, and all
                                UTF-8 characters are valid. Refer to
                                   <link
                                   xlink:href="http://www.utf8-chartable.de/"
                                   >
                                   http://www.utf8-chartable.de/</link>
                                for information about the UTF-8
                                character set. Refer to the request
                                examples in this section for the
                                required xml/json format.</td>
                            <td colspan="1">No</td>
                        </tr>
                        
                        <tr>
                            <td colspan="1">protocol</td>
                            <td colspan="3">Protocol of the service
                                which is being load balanced. Refer to
                                   <xref linkend="Protocols-d1e4264"/>
                                for a table of available
                                protocols.</td>
                            <td colspan="1">No</td>
                        </tr>
                        <tr>
                            <td colspan="1">halfClosed</td>
                            <td colspan="3">Enable or Disable
                                Half-Closed support for the load
                                balancer.</td>
                            <td colspan="1">No</td>
                        </tr>
                        
                        <tr>
                            <td colspan="1">algorithm</td>
                            <td colspan="3">Algorithm that defines how
                                traffic should be directed between
                                back-end nodes. Refer to the request
                                examples in <xref
                                   linkend="Algorithms-d1e4367"/> for
                                the required xml/json format.</td>
                            <td colspan="1">No</td>
                        </tr>
                        
                        <tr>
                            <td colspan="1">port</td>
                            <td colspan="3">Port number for the
                                service you are load balancing.</td>
                            <td colspan="1">No</td>
                        </tr>

                        <tr>
                            <td colspan="1">timeout</td>
                            <td colspan="3">The timeout value for
                                the load balancer and communications with its nodes.
                                Defaults to 30 seconds with a max 120 seconds.</td>
                            <td colspan="1">No</td>
                        </tr>
                        
                    </tbody>
                </table>
                <example>
                    <title>Update Load Balancer Attributes Request: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-update-lb-attributes-request.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Update Load Balancer Attributes Request: JSON</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="json">
<xi:include href="samples/lb-update-lb-attributes-request.json" parse="text"/>
                    </programlisting>
                </example>
                <para>All load balancers also have a status attribute to signify the current
                    configuration status of the device. This status is immutable by the caller and is
                    updated automatically based on state changes within the service. When a load
                    balancer is first created, it will be placed into a
                    <code>BUILD</code>
                    status while
                    the configuration is being generated and applied based on the request. Once the
                    configuration is applied and finalized, it will be in an
                    <code>ACTIVE</code>
                    status.
                    In the event of a configuration change or update, the status of the load balancer
                    will change to
                    <code>PENDING_UPDATE</code>
                    to signify configuration changes are in
                    progress but have not yet been finalized. Load balancers in a
                    <code>SUSPENDED</code>
                    status are configured to reject traffic and will not forward requests to back-end
                    nodes.
                </para>
                <table rules="all">
                    <caption>Load Balancer Statuses</caption>
                    <thead>
                        <tr align="center">
                            <td colspan="1">Name</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">
                                <code>ACTIVE</code>
                            </td>
                            <td colspan="3">
                                Load balancer is configured properly and ready to serve traffic to incoming requests
                                via the configured virtual IPs.
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                <code>BUILD</code>
                            </td>
                            <td colspan="3">
                                Load balancer is being provisioned for the first time and configuration is being
                                applied to bring the service online. The service will not yet be ready to serve
                                incoming requests.
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                <code>PENDING_UPDATE</code>
                            </td>
                            <td colspan="3">Load balancer is online but configuration changes are
                                being applied to update the service based on a previous request.
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                <code>PENDING_DELETE</code>
                            </td>
                            <td colspan="3">Load balancer is online but configuration changes are
                                being applied to begin deletion of the service based on a previous
                                request.
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                <code>SUSPENDED</code>
                            </td>
                            <td colspan="3">
                                Load balancer has been taken offline and disabled; contact Support.
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                <code>ERROR</code>
                            </td>
                            <td colspan="3">
                                The system encountered an error when attempting to configure the load
                                balancer; contact Support.
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                <code>DELETED</code>
                            </td>
                            <td colspan="3">Load balancers in
                                <code>DELETED</code>
                                status can be
                                displayed for at least 90 days after deletion.
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>
            <section xml:id="Remove_Load_Balancer-d1e2093">
                <title>Remove Load Balancer</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&DELETE;
                            </td>
                            <td colspan="3"
                                   >/loadbalancers/<parameter>loadBalancerId</parameter>
                            </td>
                            <td colspan="3">Remove a load balancer from the account.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&BATCH_DELETE;
                            </td>
                            <td colspan="3">
                                   /loadbalancers?id=<parameter>loadBalancerId</parameter>
                            </td>
                            <td colspan="3">Batch delete load balancers given specified id list.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>
                    The remove load balancer function removes the specified load balancer and its associated
                    configuration from the account. Any and all configuration data is immediately purged and
                    is not recoverable.
                </para>
                <para>To batch delete load balancers, provide a query
                    parameter list of load balancer ids. For example:
                    /loadbalancers?id=<parameter>loadBalancerId</parameter>&amp;id=
                    <parameter>loadBalancerId</parameter>
                    The current default limit is ten ids per request.
                    Any and all configuration data is immediately
                    purged and is not recoverable. By chance one of
                    the items in the list cannot be removed due to its
                    current status a 400:BadRequest is returned along
                    with the ids of the ones the system identified as
                    potential failures for this request.
                </para>
                <para>
                    This operation does not require a request body.
                </para>
                <para>
                    This operation does not return a response body.
                </para>
            </section>
        </section>
        <section xml:id="Erropage-d1e666">
            <title>Error Page</title>
            <para>An <glossterm>error page</glossterm> is the html
                file that is shown to an end user who is attempting to
                access a load balancer <glossterm>node</glossterm>
                that is offline/unavailable. </para>
            <section xml:id="default_error_page">
                <title>Default Error Page</title>
                <para>During provisioning, every load balancer is
                    configured with a default error page that gets
                    displayed when traffic is requested for an offline
                    node.
                </para>
            </section>
            <section xml:id="custom_error_page">
                <title>Custom Error Page</title>
                <para>A single custom error page may be added to a
                    load balancer with an HTTP-based protocol. Page
                    updates will override existing content. If a
                    custom error page is deleted, or the load balancer
                    is changed to a non-HTTP protocol, the default
                    error page will be restored. </para>
            </section>

            <section xml:id="List_Errorpage-d1e2218">
                <title>Error Page Operations</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">
                                &GET;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/errorpage
                            </td>
                            <td colspan="3">List error page configured
                                for the specified load balancer.
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                &PUT;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/errorpage
                            </td>
                            <td colspan="3">Set custom error page for
                                the specified load balancer.
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                &DELETE;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/errorpage
                            </td>
                            <td colspan="3">Delete custom error page
                                for the specified load balancer.
                            </td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>The following table lists the required and
                    optional attributes for Set Custom Error
                    Page:</para>
                <table rules="all">
                    <caption>Required and Optional Attributes for Set
                        Custom Error Page</caption>
                    <thead>
                        <tr>
                            <td colspan="1">Name </td>
                            <td colspan="3">Description</td>
                            <td colspan="1">Required</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="1">content</td>
                            <td colspan="3">Specifies the HTML content
                                for the custom error page.  Must be
                                65536 characters or less. Refer to the
                                request examples in this section for
                                the required xml/json format.</td>
                            <td colspan="1">Yes</td>
                        </tr>
                        
                    </tbody>
                </table>
                <example>
                    <title>List Error Page Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-error-page.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Error Page Response: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-list-error-page.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Add Error Page Request: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-add-error-page.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Add Error Page Request: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-add-error-page.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Add Error Page Response: XML</title>
                    <programlisting language="xml">
 <xi:include href="samples/lb-list-error-page.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Add Error Page Response: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-list-error-page.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
        </section>
        <section xml:id="List_Load_Balancer_Stats-d1e1524">
            <title>List Load Balancer Stats</title>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td colspan="1">Verb</td>
                        <td colspan="3">URI</td>
                        <td colspan="3">Description</td>
                        <td colspan="2">Representations</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">&GET;
                        </td>
                        <td colspan="3"
                                >/loadbalancers/<parameter>loadBalancerId</parameter>/stats
                        </td>
                        <td colspan="3">provides detailed stats output
                            for a specific load balancer
                        </td>
                        <td colspan="2">JSON, XML</td>
                    </tr>
                </tbody>
            </informaltable>
            <para>Normal Response Code(s):
                <returnvalue>200</returnvalue>
            </para>
            <simpara>Error Response Code(s): loadbalancerFault
                (<errorcode>400</errorcode>,
                <errorcode>500</errorcode>), serviceUnavailable
                (<errorcode>503</errorcode>), unauthorized
                (<errorcode>401</errorcode>), badRequest
                (<errorcode>400</errorcode>), overLimit
                (<errorcode>413</errorcode>)
            </simpara>
            <para>This operation provides detailed stats output,
                including the following information, for a specific
                load balancer configured and associated with the
                user's account:
            </para>
            <itemizedlist>
                <listitem>
                    <para>
                        <emphasis role="bold">
                            connectTimeOut
                        </emphasis> &ndash;
                        Connections closed by this load balancer
                        because the 'connect_timeout' interval was
                        exceeded.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis role="bold"
                                >connectError
                        </emphasis> &ndash; Number of
                        transaction or protocol errors in this load
                        balancer.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis role="bold"
                                >connectFailure
                        </emphasis> &ndash; Number
                        of connection failures in this load
                        balancer.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis role="bold">
                            dataTimedOut
                        </emphasis> &ndash;
                        Connections closed by this load balancer
                        because the 'timeout' interval was
                        exceeded.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis role="bold"
                                >keepAliveTimedOut
                        </emphasis> &ndash;
                        Connections closed by this load balancer
                        because the 'keepalive_timeout' interval was
                        exceeded.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis role="bold">maxConn</emphasis>
                        &ndash; Maximum number of simultaneous TCP
                        connections this load balancer has processed
                        at any one time.
                    </para>
                </listitem>
            </itemizedlist>
            <para>This operation does not require a request body.</para>
            <example>
                <title>List Load Balancer stats Response: XML</title>
                <programlisting language="xml">
<xi:include href="samples/lb-stats.xml" parse="text"/>
                </programlisting>
            </example>
            <example>
                <title>List Load Balancers Stats Response:
                    JSON
                </title>
                <programlisting language="json">
  <xi:include href="samples/lb-stats.json" parse="text"/>
                </programlisting>
            </example>
        </section>
        <section xml:id="Nodes-d1e2173">
            <title>Nodes</title>
            <para>The <glossterm baseform="node">nodes</glossterm>
                defined by the load balancer are responsible for
                servicing the requests received through the load
                balancer's virtual IP. By default, the load balancer
                employs a basic health check that ensures the node is
                listening on its defined port. The node is checked at
                the time of addition and at regular intervals as
                defined by the load balancer health check
                configuration. If a back-end node is not listening on
                its port or does not meet the conditions of the
                defined active health check for the load balancer,
                then the load balancer will not forward connections
                and its status will be listed as <code>OFFLINE</code>.
                Only nodes that are in an <code>ONLINE</code> status
                will receive and be able to service traffic from the
                load balancer. </para>
            <para>All nodes have an associated status that indicates
                whether the node is <code>ONLINE</code>,
                    <code>OFFLINE</code>, or <code>DRAINING</code>.
                Only nodes that are in <code>ONLINE</code> status will
                receive and be able to service traffic from the load
                balancer. The <code>OFFLINE</code> status represents a
                node that cannot accept or service traffic. A node in
                    <code>DRAINING</code> status represents a node
                that stops the traffic manager from sending any
                additional new connections to the node, but honors
                established sessions. If the traffic manager receives
                a request and session persistence requires that the
                node is used, the traffic manager will use it. The
                status is determined by the passive or active health
                monitors. </para>
            <para>If the
                <code>WEIGHTED_ROUND_ROBIN</code>
                load balancer algorithm mode is
                selected, then the caller should assign the relevant weights to the node as part of
                the weight attribute of the node element. When the algorithm of the load balancer is
                changed to
                <code>WEIGHTED_ROUND_ROBIN</code>
                and the nodes do not already have an
                assigned weight, the service will automatically set the weight to "1" for all nodes.
            </para>
            
            <para> One or more secondary nodes can be added to a
                specified load balancer so that if all the primary
                nodes fail, traffic can be redirected to secondary
                nodes. The type attribute allows configuring the node
                as either <code>PRIMARY</code> or
                    <code>SECONDARY</code>. </para>

            <section xml:id="List_Nodes-d1e2218">
                <title>List Nodes</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">
                                &GET;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/nodes
                            </td>
                            <td colspan="3">List node(s) configured for the load balancer.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                &GET;
                            </td>
                            <td colspan="3"
                                   >/loadbalancers/<parameter>loadBalancerId</parameter>/nodes/<parameter>nodeId</parameter>
                            </td>
                            <td colspan="3">List details of a specific node.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>
                    This operation does not require a request body.
                </para>
                <note>
                    <para>The
                        <code>weight</code>
                        attributes are only
                        displayed for load balancers that use the
                        <code>WEIGHTED_LEAST_CONNECTIONS</code>
                        or
                        <code>WEIGHTED_ROUND_ROBIN</code>
                        algorithms.
                    </para>
                </note>
                
                <example>
                    <title>List Node Response: XML</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="xml">
  <xi:include href="samples/lb-list-node-response.xml" parse="text"/>
                    </programlisting>
                </example>
                
                <example>
                    <title>List Node Response: JSON</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="json">
<xi:include href="samples/lb-list-node-response.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Atom Node Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-node-id.xml" parse="text"/>
                    </programlisting>
                </example>
                
                <example>
                    <title>List Nodes Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-nodes-response.xml" parse="text"/>
                    </programlisting>
                </example>
                
                <example>
                    <title>List Nodes Response: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-list-nodes-response.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Atom Nodes Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-nodes.xml" parse="text"/>
                    </programlisting>
                </example>
            </section>
            <section xml:id="Add_Nodes-d1e2379">
                <title>Add Nodes</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">
                                &POST;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/nodes
                            </td>
                            <td colspan="3">Add a new node to the load balancer.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>When a node is added, it is assigned a unique
                    identifier that can be used for management
                    operations such as changing the condition or
                    removing it. Every load balancer is dual-homed on
                    both the public Internet and ServiceNet. As a
                    result, nodes can either be internal ServiceNet
                    addresses or addresses on the public Internet. </para>
                <para>One or more secondary nodes can be added to a
                    specified load balancer so that if all the primary
                    nodes fail, traffic can be redirected to secondary
                    nodes. The type attribute allows configuring the
                    node as either PRIMARY or SECONDARY.</para>
                <para>Domain names are also accepted with certain
                    restrictions. Refer to <xref
                        linkend="List-allowed-domains-d2f002e"/> for
                    additional details.</para>
                <para>The following table lists the required and
                    optional attributes for Add Nodes:</para>
                <table rules="all">
                    <caption>Required and Optional Attributes for Add
                        Nodes</caption>
                    <thead>
                        <tr>
                            <td colspan="1">Name </td>
                            <td colspan="3">Description</td>
                            <td colspan="1">Required</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="1">address</td>
                            <td colspan="3">IP address or domain name
                                for the node. Refer to the request
                                examples in this section for the
                                required xml/json format.</td>
                            <td colspan="1">Yes</td>
                        </tr>
                        <tr>
                            <td colspan="1">condition</td>
                            <td colspan="3">Condition for the node,
                                which determines its role within the
                                load balancer. Refer to <xref
                                   linkend="Modify_Nodes-d1e2503"/>
                                for a table of available node
                                conditions.</td>
                            <td colspan="1">Yes</td>
                        </tr>
                        <tr>
                            <td colspan="1">port</td>
                            <td colspan="3">Port number for the
                                service you are load balancing.</td>
                            <td colspan="1">Yes</td>
                        </tr>
                        <tr>
                            <td colspan="1">type</td>
                            <td colspan="3">
                                <para>Type of node to add:<itemizedlist spacing="compact">
                                   <listitem>
                                   <para><code>PRIMARY</code> &ndash;
                                   Nodes defined as
                                   <code>PRIMARY</code> are in the
                                   normal rotation to receive traffic
                                   from the load balancer.</para>
                                   </listitem>
                                   <listitem>
                                   <para><code>SECONDARY</code>
                                   &ndash; Nodes defined as
                                   <code>SECONDARY</code> are only in
                                   the rotation to receive traffic
                                   from the load balancer when all the
                                   primary nodes fail.</para>
                                   </listitem>
                                   </itemizedlist></para>
                            </td>
                            <td colspan="1">No</td>
                        </tr>
                        <tr>
                            <td colspan="1">weight</td>
                            <td colspan="3">Weight of node to add. If
                                the WEIGHTED_ROUND_ROBIN load balancer
                                algorithm mode is selected, then the
                                user should assign the relevant weight
                                to the node using the weight attribute
                                for the node. Must be an integer from
                                1 to 100.</td>
                            <td colspan="1">No</td>
                        </tr>
                        
                    </tbody>
                </table>

               
                <example>
                    <title>Add Nodes Request: XML</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="xml">
<xi:include href="samples/lb-add-nodes-request.xml" parse="text"/>
                    </programlisting>
                </example>
                
                <example>
                    <title>Add Nodes Request: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-add-nodes-request.json" parse="text"/>
                    </programlisting>
                </example>
                
                <example>
                    <title>Add Nodes Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-add-nodes-response.xml" parse="text"/>
                    </programlisting>
                </example>
                
                <example>
                    <title>Add Nodes Response: JSON</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="json">
<xi:include href="samples/lb-add-nodes-response.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
            <section xml:id="Modify_Nodes-d1e2503">
                <title>Modify Nodes</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">
                                &PUT;
                            </td>
                            <td colspan="3"
                                   >/loadbalancers/<parameter>loadBalancerId</parameter>/nodes/<parameter>nodeId</parameter>
                            </td>
                            <td colspan="3">Modify the configuration of a node on the load balancer.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>
                    This operation does not require a request body.
                </para>
                <note>
                    <para>The node's IP and port are immutable attributes and cannot be modified with a
                        &PUT; request. Supplying an unsupported attribute will result in a
                        <returnvalue>400 (badRequest)</returnvalue>
                        fault. A load balancer supports
                        a maximum of 25 nodes; the maximum weight of a node is 100.
                    </para>
                </note>
                <para>Every node in the load balancer has an associated condition which determines
                    its role within the load balancer.
                </para>
                <para>The following table lists the required and
                    optional attributes for Modify Nodes:</para>
                <table rules="all">
                    <caption>Required and Optional Attributes for
                        Modify Nodes</caption>
                    <thead>
                        <tr>
                            <td colspan="1">Name </td>
                            <td colspan="3">Description</td>
                            <td colspan="1">Required</td>
                        </tr>
                    </thead>
                    <tbody>
                        
                        <tr>
                            <td colspan="1">condition</td>
                            <td colspan="3">Condition for the node,
                                which determines its role within the
                                load balancer. Refer to <xref
                                   linkend="Modify_Nodes-d1e2503"/>
                                for a table of available node
                                conditions.</td>
                            <td colspan="1">No</td>
                        </tr>
                        
                        <tr>
                            <td colspan="1">type</td>
                            <td colspan="3">
                                <para>Type of node:<itemizedlist spacing="compact">
                                   <listitem>
                                   <para><code>PRIMARY</code> &ndash;
                                   Nodes defined as
                                   <code>PRIMARY</code> are in the
                                   normal rotation to receive traffic
                                   from the load balancer.</para>
                                   </listitem>
                                   <listitem>
                                   <para><code>SECONDARY</code>
                                   &ndash; Nodes defined as
                                   <code>SECONDARY</code> are only in
                                   the rotation to receive traffic
                                   from the load balancer when all the
                                   primary nodes fail. This provides a
                                   failover feature that automatically
                                   routes traffic to the secondary
                                   node in the event that the primary
                                   node is disabled or in a failing
                                   state. Note that active health
                                   monitoring must be enabled on the
                                   load balancer to enable the
                                   failover feature to the secondary
                                   node.</para>
                                   </listitem>
                                   </itemizedlist></para>
                            </td>
                            <td colspan="1">No</td>
                        </tr>
                        <tr>
                            <td colspan="1">weight</td>
                            <td colspan="3">Weight of node. If the
                                WEIGHTED_ROUND_ROBIN load balancer
                                algorithm mode is selected, then the
                                user should assign the relevant weight
                                to the node using the weight attribute
                                for the node. Must be an integer from
                                1 to 100.</td>
                            <td colspan="1">No</td>
                        </tr>
                    </tbody>
                </table>
                <note>
                    <para><emphasis>At least one</emphasis> of the
                        optional attributes is required for the Modify
                        Nodes request.</para>
                </note>
                <table rules="all">
                    <caption>Load Balancer Node Conditions</caption>
                    <?dbfo keep-together="always"?>
                    <thead>
                        <tr align="center">
                            <td colspan="1">Name</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">
                                <code>ENABLED</code>
                            </td>
                            <td colspan="3">Node is permitted to accept new connections.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                <code>DISABLED</code>
                            </td>
                            <td colspan="3">Node is not permitted to accept any new connections
                                regardless of session persistence configuration. Existing connections
                                are forcibly terminated.
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                <code>DRAINING</code>
                            </td>
                            <td colspan="3">Node is allowed to service existing established connections
                                and connections that are being directed to it as a result of the session
                                persistence configuration.
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <example>
                    <title>Modify Node Condition Request: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-update-node-request.xml" parse="text"/>
                    </programlisting>
                </example>
                
                <example>
                    <title>Modify Node Condition Request: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-update-node-request.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
            <section xml:id="Remove_Nodes-d1e2675">
                <title>Remove Nodes</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">
                                &DELETE;
                            </td>
                            <td colspan="3"
                                   >/loadbalancers/<parameter>loadBalancerId</parameter>/nodes/<parameter>nodeId</parameter>
                            </td>
                            <td colspan="3">Remove a node from the load balancer.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&BATCH_DELETE;
                            </td>
                            <td colspan="3"
                                   >/loadbalancers/<parameter>loadBalancerId</parameter>/nodes?id=<parameter>nodeId</parameter>
                                   &amp;id=<parameter>nodeId</parameter>
                            </td>
                            <td colspan="3">Batch delete the nodes given specified id list.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>To batch delete nodes, provide a query parameter
                    list of node ids. For example:
                        /nodes?id=<parameter>nodeId</parameter>&amp;id=
                        <parameter>nodeId</parameter> The current
                    default limit is ten ids per request. Any and all
                    configuration data is immediately purged and is
                    not recoverable. By chance if one of the items in
                    the list cannot be removed due to its current
                    status a 400:BadRequest is returned along with the
                    ids of the ones the system identified as potential
                    failures for this request </para>
                <para>This operation does not require a request
                    body.</para>
            </section>
            <section xml:id="Node-Events-d1e264">
                <title>View Node Service Events</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">
                                &GET;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/nodes/events
                            </td>
                            <td colspan="3">Retrieve node service events.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>The View Node Service Events call will retrieve
                    a list of events associated with the activity
                    between the node and the load balancer. The events
                    report errors found with the node. The
                        <code>detailedMessage</code> provides the
                    detailed reason for the error. The events can be
                    processed as JSON, XML, and ATOM. This call has
                    pagination and a list limit of 100 events. Events
                    will be stored for 90 days. </para>
                <para> This operation does not require a request
                    body.</para>
                <example>
                    <title>View Node Service Events: XML</title>
                    <programlisting language="xml">
                        <xi:include href="samples/node-service-events-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>View Node Service Events: JSON</title>
                    <programlisting language="json">
                        <xi:include href="samples/node-service-events-response.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>View Node Service Events: ATOM</title>
                    <programlisting language="json">
                        <xi:include href="samples/node-service-events-atom-feed.xml" parse="text"/>
                    </programlisting>
                </example>
            </section>
        </section>

        <section xml:id="Virtual_IPs-d1e2754">
            <title>Virtual IPs</title>
            <para> A <glossterm>virtual IP</glossterm> (VIP) makes a
                load balancer accessible by clients. The load
                balancing service supports either a public VIP,
                routable on the public Internet, or a ServiceNet
                address, routable only within the region in which the
                load balancer resides. </para>
            <table rules="all">
                <caption>Virtual IP Types</caption>
                <?dbfo keep-together="always"?>
                <thead>
                    <tr align="center">
                        <td colspan="1">Name</td>
                        <td colspan="3">Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">
                            <code>PUBLIC</code>
                        </td>
                        <td colspan="3">An address that is routable on the public Internet.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">
                            <code>SERVICENET</code>
                        </td>
                        <td colspan="3">An address that is routable only on ServiceNet.</td>
                    </tr>
                </tbody>
            </table>
            <section xml:id="List_Virtual_IPs-d1e2809">
                <title>List Virtual IPs</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&GET;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/virtualips
                            </td>
                            <td colspan="3">List all virtual IPs associated with a load balancer.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>
                    This request does not require a request body.
                </para>
                <example>
                    <title>List Virtual IPs Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-vips-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Virtual IPs Response: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-list-vips-response.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Atom Virtual IPs Response: XML</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-vips.xml" parse="text"/>
                    </programlisting>
                </example>
            </section>
        </section>
            <section xml:id="AllowedDomains-d2f002e">
            <title>Allowed Domains</title>
            <section xml:id="List-allowed-domains-d2f002e">
                <title>List Allowed Domains</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Name</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&GET;
                            </td>
                            <td colspan="3">/loadbalancers/alloweddomains</td>
                            <td colspan="3">View a list of allowed domains.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>
                    This operation does not require a request body.
                </para>
                <para>The allowed domains are restrictions set for the
                    allowed domain names used for adding load balancer
                    nodes. In order to submit a domain name as an
                    address for the load balancer node to add, the
                    user must verify that the domain is valid by using
                    the List Allowed Domains call. Once verified,
                    simply supply the domain name in place of the
                    node's address in the Add Nodes call. Refer to
                        <xref linkend="Add_Nodes-d1e2379"/> for
                    examples. </para>
                <note>
                    <para>Currently only Rackspace-based domain names
                        are supported. </para>
                </note>
                <example>
                    <title>List Allowed Domains: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/allowed-domains.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Allowed Domains: JSON</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="json">
<xi:include href="samples/allowed-domains.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
           </section>

            <section xml:id="Add_Virtual_IP_Version_6">
                <title>Add Virtual IP Version 6</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&POST;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/virtualips
                            </td>
                            <td colspan="3">Add virtual IP version 6</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response code(s): loadbalancerFault (<errorcode>400</errorcode>,<errorcode>
                    500</errorcode>),
                    serviceUnavailable (<errorcode>503</errorcode>), unauthorized (<errorcode>401</errorcode>),
                    badRequest (<errorcode>400</errorcode>), overLimit (<errorcode>413</errorcode>)
                </simpara>
            <para>The following table lists the required and optional
                attributes for Add Virtual IP Version 6:</para>
            <table rules="all">
                <caption>Required and Optional Attributes for Add
                    Virtual IP Version 6</caption>
                <thead>
                    <tr>
                        <td colspan="1">Name </td>
                        <td colspan="3">Description</td>
                        <td colspan="1">Required</td>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <td colspan="1">ipVersion</td>
                        <td colspan="3">IP Version: must be set to
                                <code>IPV6</code>. </td>
                        <td colspan="1">Yes</td>
                    </tr>
                    
                    <tr>
                        <td colspan="1">type</td>
                        <td colspan="3">
                            <para>Type of virtualIp to add:<itemizedlist spacing="compact">
                                   <listitem>
                                   <para><code>PUBLIC</code> &ndash;
                                   Virtual IP on the public
                                   internet.</para>
                                   </listitem>
                                   <listitem>
                                   <para><code>SERVICENET</code>
                                   &ndash; Virtual IP on the Rackspace
                                   private ServiceNet.</para>
                                   </listitem>
                                </itemizedlist></para>
                        </td>
                        <td colspan="1">Yes</td>
                    </tr>
                    
                </tbody>
            </table>
                <example>
                    <title>Add Virtual IP Version 6 Request: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-add-vip-v6-request.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Add Virtual IP Version 6 Request: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-add-vip-v6-request.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Add Virtual IP Version 6 Response: XML</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="xml">
<xi:include href="samples/lb-add-vip-v6-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Add Virtual IP Version 6 Response: JSON</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="json">
<xi:include href="samples/lb-add-vip-v6-response.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
            <section xml:id="Remove_Virtual_IP-d1e2919">
                <title>Remove Virtual IP</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&DELETE;
                            </td>
                            <td colspan="3"
                                >/loadbalancers/<parameter>loadBalancerId</parameter>/virtualips/<parameter>virtualipId</parameter>
                        </td>
                            <td colspan="3">Remove a virtual IP.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&BATCH_DELETE;
                            </td>
                            <td colspan="3"
                                >/loadbalancers/<parameter>loadBalancerId</parameter>/virtualips?id=<parameter>virtualipId</parameter>
                                &amp;id=<parameter>virtualipId</parameter>
                        </td>
                            <td colspan="3">Batch delete the virtual IPs
                                specified in the id list.
                            </td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>
                    This request does not require a request body.
                </para>
                <note>
                    <para>All load balancers must have at least one
                        virtual IP associated with them at all times.
                        Attempting to delete the last virtual IP will
                        result in a
                        <returnvalue>400
                            (badRequest)
                        </returnvalue>
                        fault. To batch
                        delete virtual ips, provide a query parameter
                        list of virtual ip ids. For example:
                        /virtualips?id=<parameter>virtualIpId</parameter>&amp;id=<parameter>virtualIpId</parameter>.
                        The current default limit is ten ids per
                        request. Any and all configuration data is
                        immediately purged and is not recoverable. If
                        one or more of the items in the list cannot be
                        removed due to its current status, a
                        <returnvalue>400
                            (badRequest)
                        </returnvalue>
                        is returned
                        along with the ids of the ones the system
                        identified as potential failures for this
                        request.
                    </para>
                </note>
            </section>
        <section xml:id="Usage_Reports-d1e3009">
            <title>Usage Reports</title>
            <section xml:id="List_Usage-d1e3014">
                <title>List Usage</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Name</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&GET;
                            </td>
                            <td colspan="3">/loadbalancers/billable?startTime=2010-12-15&amp;endTime=2011-5-1
                                &amp;offset=2&amp;limit=2</td>
                            <td colspan="3">List billable load balancers for the given date range. The response is paginated with a default limit of 500 and a maximum limit of 1000.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&GET;
                            </td>
                            <td colspan="3">/loadbalancers/usage?startTime=2010-12-15&amp;endTime=2011-5-1</td>
                            <td colspan="3">List account level usage.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&GET;
                            </td>
                            <td colspan="3">/loadbalancers/loadBalancerId/usage?startTime=2010-12-15&amp;endTime=2011-5-1</td>
                            <td colspan="3">List historical usage.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&GET;
                            </td>
                            <td colspan="3">/loadbalancers/loadBalancerId/usage/current</td>
                            <td colspan="3">List current usage.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>
                    This operation does not require a request body.
                </para>
                <para>The load balancer usage reports provide a view
                    of all transfer activity, average number of
                    connections, and number of virtual IPs associated
                    with the load balancing service. Current usage
                    represents all usage recorded within the preceding
                    24 hours. Values for both
                        <code>incomingTransfer</code> and
                        <code>outgoingTransfer</code> are expressed in
                    bytes transferred. </para>
                <para>The optional <code>startTime</code> and
                        <code>endTime</code> parameters can be used to
                    filter all usage. If the <code>startTime</code>
                    parameter is supplied but the <code>endTime</code>
                    parameter is not, then all usage beginning with
                    the <code>startTime</code> will be provided.
                    Likewise, if the <code>endTime</code> parameter is
                    supplied but the <code>startTime</code> parameter
                    is not, then all usage will be returned up to the
                        <code>endTime</code> specified. </para>
                <note>
                    <para>Historical usage data is available for up to 90 days of service
                        activity.
                    </para>
                </note>
                <example>
                    <title>Report Billable Load Balancers Response (Paginated): XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-loadbalancers-billable-paged.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Report Billable Load Balancers Response (Paginated): JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-loadbalancers-billable-paged.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Report Load Balancer Usage Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-report-usage-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Report Load Balancer Usage Response: JSON</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="json">
<xi:include href="samples/lb-report-usage-response.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
        </section>
        <section xml:id="Access_Lists-d1e3160">
            <title>Access Lists</title>
            <para>The access list management feature allows fine-grained network access controls to
                be applied to the load balancer's virtual IP address. A single IP address, multiple
                IP addresses, or entire network subnets can be added as a<code>networkItem</code>.
                Items that are configured with the
                <code>ALLOW</code>
                type will always take
                precedence over items with the
                <code>DENY</code>
                type. To reject traffic from all
                items except for those with the
                <code>ALLOW</code>
                type, add a
                <code>networkItem</code>
                with an address of "0.0.0.0/0" and a
                <code>DENY</code>
                type.
            </para>
            <section xml:id="Manage_Access_Lists-d1e3187">
                <title>Manage Access Lists</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Name</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&GET;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/accesslist
                            </td>
                            <td colspan="3">List the access list.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&POST;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/accesslist
                            </td>
                            <td colspan="3">Create a new access list or append to an existing access list.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&DELETE;
                            </td>
                            <td colspan="3"
                                   >/loadbalancers/<parameter>loadBalancerId</parameter>/accesslist/<parameter>networkItemId</parameter>
                            </td>
                            <td colspan="3">Remove a network item from the access list.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&DELETE;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/accesslist
                            </td>
                            <td colspan="3">Remove the entire access list.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&BATCH_DELETE;
                            </td>
                            <td colspan="3"
                                   >/loadbalancers/<parameter>loadBalancerId/</parameter>accesslist?id=<parameter>networkItemId</parameter>
                                   &amp;id=<parameter>networkItemId</parameter>
                            </td>
                            <td colspan="3">Batch delete the access list network items given specified id list.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>This operation does not require a request body.</para>
                <para> When issuing a &POST; to add to an access list,
                    one or more network items are required. If a
                    populated access list already exists for the load
                    balancer, it will be appended to with subsequent
                    &POST; requests. One access list may include up to
                    100 network items A single address or subnet
                    definition is considered unique and cannot be
                    duplicated between items in an access list. </para>
                <para>The following table lists the required and
                    optional attributes for Create or Append To Access
                    List:</para>
                <table rules="all">
                    <caption>Required and Optional Attributes for
                        Create or Append To Access List</caption>
                    <thead>
                        <tr>
                            <td colspan="1">Name </td>
                            <td colspan="3">Description</td>
                            <td colspan="1">Required</td>
                        </tr>
                    </thead>
                    <tbody>
                       
                        <tr>
                            <td colspan="1">address</td>
                            <td colspan="3">IP address for item to add
                                to access list. </td>
                            <td colspan="1">Yes</td>
                        </tr>
                        <tr>
                            <td colspan="1">type</td>
                            <td colspan="3">
                                <para>Type of item to add:<itemizedlist spacing="compact">
                                   <listitem>
                                   <para><code>ALLOW</code> &ndash;
                                   Specifies items that will always
                                   take precedence over items with the
                                   <code>DENY</code> type.</para>
                                   </listitem>
                                   <listitem>
                                   <para><code>DENY</code> &ndash;
                                   Specifies items to which traffic
                                   can be denied.</para>
                                   </listitem>
                                   </itemizedlist></para>
                            </td>
                            <td colspan="1">Yes</td>
                        </tr>
                    </tbody>
                </table>
                <para>There are two &DELETE; operations for the access
                    list. One allows for deletion of multiple network
                    items in an access list, or the entire accesslist,
                    and the other for deletion of a specific network
                    item in the access list. </para>
                <example>
                    <?dbfo keep-together="always"?>
                    <title>List Access List Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-retrieve-accesslist-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Access List Response: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-retrieve-accesslist-response.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Atom Access List Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-accesslist.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Update Access List Attributes Request: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-update-accesslist-request.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Update Access List Attributes Request: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-update-accesslist-request.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
        </section>
        <section xml:id="Monitors-d1e3370">
            <title>Monitors</title>
            <para>The load balancing service includes a health
                monitoring operation which periodically checks your
                back-end nodes to ensure they are responding
                correctly. If a node is not responding, it is removed
                from rotation until the <glossterm>health monitor</glossterm> determines that the node is
                functional. In addition to being performed
                periodically, the health check also is performed
                against every node that is added to ensure that the
                node is operating properly before allowing it to
                service traffic. Only one health monitor is allowed to
                be enabled on a load balancer at a time. </para>
            <para>As part of your strategy for monitoring connections,
                you should consider defining secondary nodes that
                provide failover for effectively routing traffic in
                case the primary node fails. This is an additional
                feature that will ensure you remain up in case your
                primary node fails. See <xref
                    linkend="Modify_Nodes-d1e2503"/> for additional
                information.</para>
            <para>
                Every health monitor has a
                <code>type</code>
                attribute to signify what kind of monitor it is.
            </para>
            <table rules="all">
                <caption>Health Monitor Types</caption>
                <?dbfo keep-together="always"?>
                <thead>
                    <tr align="center">
                        <td colspan="1">Name</td>
                        <td colspan="3">Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">CONNECT</td>
                        <td colspan="3">Health monitor is a connect monitor.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">HTTP</td>
                        <td colspan="3">Health monitor is an HTTP monitor.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">HTTPS</td>
                        <td colspan="3">Health monitor is an HTTPS monitor.</td>
                    </tr>
                </tbody>
            </table>
            <note>
                <para>When deleting a health monitor of any type,
                    every node on that load balancer that is enabled
                    or has failed and is in OFFLINE status will have
                    its status updated to ONLINE regardless of the
                    health of the node.</para>
            </note>
            <section xml:id="Monitor_Health-d1e3434">
                <title>Monitor Health</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&GET;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/healthmonitor
                            </td>
                            <td colspan="3">Retrieve the
                                   <glossterm>health
                                   monitor</glossterm> configuration,
                                if one exists.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&PUT;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/healthmonitor
                            </td>
                            <td colspan="3">Update the settings for a health monitor.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&DELETE;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/healthmonitor
                            </td>
                            <td colspan="3">Remove the health monitor.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <section xml:id="Monitor_Connections-d1e3536">
                    <title>Monitor Connections</title>
                    <para>The monitor connects to each node on its
                        defined port to ensure that the service is
                        listening properly. The connect monitor is the
                        most basic type of health check and does no
                        post-processing or protocol specific health
                        checks. It includes several configurable
                        properties. </para>
                    <para>The following table lists the required and
                        optional attributes for Monitor
                        Connections:</para>
                    <table rules="all">
                        <caption>Required and Optional Attributes for
                            Monitor Connections</caption>
                        <thead>
                            <tr>
                                <td colspan="1">Name </td>
                                <td colspan="3">Description</td>
                                <td colspan="1">Required</td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="1"
                                   >attemptsBefore<?sbr?>Deactivation</td>
                                <td colspan="3">
                                   <para>Number of permissible monitor
                                   failures before removing a node
                                   from rotation. Must be a number
                                   between 1 and 10.</para>
                                </td>
                                <td colspan="1">Yes</td>
                            </tr>
                            <tr>
                                <td colspan="1">delay</td>
                                <td colspan="3">
                                    <para>The minimum number of
                                   seconds to wait before executing
                                   the health monitor. Must be a
                                   number between 1 and 3600.</para>
                                </td>
                                <td colspan="1">Yes</td>
                            </tr>
                            <tr>
                                <td colspan="1">timeout</td>
                                <td colspan="3">
                                    <para>Maximum number of seconds to
                                   wait for a connection to be
                                   established before timing out. Must
                                   be a number between 1 and 300. </para>
                                </td>
                                <td colspan="1">Yes</td>
                            </tr>
                            <tr>
                                <td colspan="1">type</td>
                                <td colspan="3">
                                    <para>Type of the health monitor.
                                   Must be specified as "CONNECT" to
                                   monitor connections.</para>
                                </td>
                                <td colspan="1">Yes</td>
                            </tr>
                        </tbody>
                    </table>
                    <example>
                        <title>Monitor Connections Request: XML</title>
                        <?dbfo keep-together="always"?>
                        <programlisting language="xml">
<xi:include href="samples/lb-monitor-connect-request.xml" parse="text"/>
                        </programlisting>
                    </example>
                    <example>
                        <title>Monitor Connections Request: JSON</title>
                        <programlisting language="json">
 <xi:include href="samples/lb-monitor-connect-request.json" parse="text"/>
                        </programlisting>
                    </example>
                    <example>
                        <title>Monitor Connections Response: XML</title>
                        <programlisting language="xml">
<xi:include href="samples/lb-monitor-connect-response.xml" parse="text"/>
                        </programlisting>
                    </example>
                    <example>
                        <title>Monitor Connections Response: JSON</title>
                        <?dbfo keep-together="always"?>
                        <programlisting language="json">
  <xi:include href="samples/lb-monitor-connect-response.json" parse="text"/>
                        </programlisting>
                    </example>
                    <example>
                        <title>List Atom Health Monitor Response: XML</title>
                        <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-healthmonitor.xml" parse="text"/>
                        </programlisting>
                    </example>
                </section>
                <section xml:id="Monitor_HTTP_and_HTTPS-d1e3635">
                    <title>Monitor HTTP and HTTPS</title>
                    <para>The HTTP and HTTPS monitor is more
                        intelligent than the connect monitor. It is
                        capable of processing an HTTP or HTTPS
                        response to determine the condition of a node.
                        It supports the same basic properties as the
                        connect monitor and includes additional
                        attributes that are used to evaluate the HTTP
                        response. </para>
                    <para> The user can supply an optional
                            <code>hostHeader</code> attribute for the
                        HTTP and HTTPS health monitor to specify a
                        host for which the health monitors will check. </para>
                    <para>The following table lists the required and
                        optional attributes for Monitor HTTP and
                        HTTPS:</para>
                    <table rules="all">
                        <caption>Required and Optional Attributes for
                            Monitor HTTP and HTTPS</caption>
                        <thead>
                            <tr>
                                <td colspan="1">Name </td>
                                <td colspan="3">Description</td>
                                <td colspan="1">Required</td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="1"
                                   >attemptsBefore<?sbr?>Deactivation</td>
                                <td colspan="3">
                                   <para>Number of permissible monitor
                                   failures before removing a node
                                   from rotation. Must be a number
                                   between 1 and 10.</para>
                                </td>
                                <td colspan="1">Yes</td>
                            </tr>
                            <tr>
                                <td colspan="1">bodyRegex</td>
                                <td colspan="3">
                                    <para>A regular expression that
                                   will be used to evaluate the
                                   contents of the body of the
                                   response. </para>
                                </td>
                                <td colspan="1">Yes</td>
                            </tr>
                            <tr>
                                <td colspan="1">delay</td>
                                <td colspan="3">
                                   <para>The minimum number of seconds
                                   to wait before executing the health
                                   monitor. Must be a number between 1
                                   and 3600.</para>
                                </td>
                                <td colspan="1">Yes</td>
                            </tr>
                            <tr>
                                <td colspan="1">hostHeader</td>
                                <td colspan="3">
                                    <para>The name of a host for which
                                   the health monitors will
                                   check.</para>
                                </td>
                                <td colspan="1">No</td>
                            </tr>
                            
                            <tr>
                                <td colspan="1">path</td>
                                <td colspan="3">
                                   <para>The HTTP path that will be
                                   used in the sample request.</para>
                                </td>
                                <td colspan="1">Yes</td>
                            </tr>
                            <tr>
                                <td colspan="1">statusRegex</td>
                                <td colspan="3">
                                    <para>A regular expression that
                                   will be used to evaluate the HTTP
                                   status code returned in the
                                   response. </para>
                                </td>
                                <td colspan="1">Yes</td>
                            </tr>
                            <tr>
                                <td colspan="1">timeout</td>
                                <td colspan="3">
                                    <para>Maximum number of seconds to
                                        wait for a connection to be
                                        established before timing out. Must
                                        be a number between 1 and 300.
                                    </para>
                                </td>
                                <td colspan="1">Yes</td>
                            </tr>
                            <tr>
                                <td colspan="1">type</td>
                                <td colspan="3">
                                    <para>Type of the health monitor.
                                        Must be specified as "HTTP" to
                                        monitor an HTTP response or "HTTPS"
                                        to monitor an HTTPS
                                        response.</para>
                                </td>
                                <td colspan="1">Yes</td>
                            </tr>
                            
                        </tbody>
                    </table>
                    <example>
                        <title>Monitor HTTP Response: XML</title>
                        <programlisting language="xml">
<xi:include href="samples/lb-monitor-http-response.xml" parse="text"/>
                        </programlisting>
                    </example>
                    <example>
                        <title>Monitor HTTP Response: JSON</title>
                        <programlisting language="json">
<xi:include href="samples/lb-monitor-http-response.json" parse="text"/>
                        </programlisting>
                    </example>
                    <example>
                        <title>Monitor HTTPS Response: XML</title>
                        <?dbfo keep-together="always"?>
                        <programlisting language="xml">
<xi:include href="samples/lb-monitor-https-response.xml" parse="text"/>
                        </programlisting>
                    </example>
                    <example>
                        <title>Monitor HTTPS Response: JSON</title>
                        <programlisting language="json">
<xi:include href="samples/lb-monitor-https-response.json" parse="text"/>
                        </programlisting>
                    </example>
                </section>
            </section>
        </section>
        <section xml:id="Sessions-d1e3728">
            <title>Sessions</title>
            <section xml:id="Manage_Session_Persistence-d1e3733">
                <title>Manage Session Persistence</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td>Verb</td>
                            <td>URI</td>
                            <td>Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td>&GET; </td>
                            <td>/loadbalancers/loadBalancerId/sessionpersistence</td>
                            <td>List session persistence
                                configuration.</td>
                        </tr>
                        <tr align="left">
                            <td>&PUT; </td>
                            <td>/loadbalancers/loadBalancerId/sessionpersistence</td>
                            <td>Enable session persistence.</td>
                        </tr>
                        <tr align="left">
                            <td>&DELETE; </td>
                            <td>/loadbalancers/loadBalancerId/sessionpersistence</td>
                            <td>Disable session persistence.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para> Normal Response Code(s):
                        <returnvalue>200</returnvalue>,
                        <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault
                        (<errorcode>400</errorcode>,
                        <errorcode>500</errorcode>),
                    serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>),
                    badRequest (<errorcode>400</errorcode>), overLimit
                        (<errorcode>413</errorcode>) </simpara>
                <para><glossterm baseform="session persistence"
                        >Session persistence</glossterm> is a feature
                    of the load balancing service that forces multiple
                    requests from clients to be directed to the same
                    node. This is common with many web applications
                    that do not inherently share application state
                    between back-end servers. Two session persistence
                    modes are available, as described in the following
                    table:</para>
                <para>The following table lists the required and
                    optional attributes for Enable Session
                    Persistence:</para>
                <table rules="all">
                    <caption>Required and Optional Attributes for
                        Enable Session Persistence</caption>
                    <thead>
                        <tr>
                            <td colspan="1">Name </td>
                            <td colspan="3">Description</td>
                            <td colspan="1">Required</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="1">persistenceType</td>
                            <td colspan="3">
                                <para>Mode in which session
                                   persistence mechanism operates.
                                   Refer to the following table
                                   "Session Persistence Modes" for the
                                   available modes.</para>
                            </td>
                            <td colspan="1">Yes</td>
                        </tr>
                    </tbody>
                </table>
                <table rules="all">
                    <caption>Session Persistence Modes</caption>
                    <?dbfo keep-together="always"?>
                    <thead>
                        <tr align="center">
                            <td colspan="1">Name</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">HTTP_COOKIE</td>
                            <td colspan="3">A session persistence mechanism that inserts an HTTP cookie and
                                is used to determine the destination back-end node. This is supported
                                for HTTP load balancing only.
                            </td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">SOURCE_IP</td>
                            <td colspan="3">A session persistence
                                mechanism that will keep track of the
                                source IP address that is mapped and
                                is able to determine the destination
                                back-end node. This is supported for
                                HTTPS pass-through and non-HTTP load
                                balancing only. </td>
                        </tr>
                    </tbody>
                </table>
                <example>
                    <title>List Session Persistence Configuration Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-persistence-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Session Persistence Configuration Response: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-list-persistence-response.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Atom Session Persistence Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-sessionpersistence.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <?dbfo keep-together="always"?>
                    <title>Set Session Persistence Type Request: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-set-persistence-request.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <?dbfo keep-together="always"?>
                    <title>Set Session Persistence Type Request: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-set-persistence-request.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
        </section>
        <section xml:id="Connections-d1e3919">
            <title>Connections</title>
            <section xml:id="Log_Connections-d1e3924">
                <title>Log Connections</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&GET;
                            </td>
                            <td colspan="3">/loadbalancers/loadBalancerId/connectionlogging</td>
                            <td colspan="3">View current configuration
                                of <glossterm>connection logging</glossterm>.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&PUT;
                            </td>
                            <td colspan="3">/loadbalancers/loadBalancerId/connectionlogging</td>
                            <td colspan="3">Enable or disable connection logging.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>This operation allows the user to view the current connection logging
                    configuration, enable connection logging, or disable connection logging.
                </para>
                <para>The following table lists the required and
                    optional attributes for Enable or Disable
                    Connection Logging:</para>
                <table rules="all">
                    <caption>Required and Optional Attributes for
                        Enable or Disable Connection Logging</caption>
                    <thead>
                        <tr>
                            <td colspan="1">Name </td>
                            <td colspan="3">Description</td>
                            <td colspan="1">Required</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="1">enabled</td>
                            <td colspan="3">
                                <para>If set to <code>true</code>,
                                   enables connection logging. If set
                                   to <code>false</code>, disables
                                   connection logging.</para>
                            </td>
                            <td colspan="1">Yes</td>
                        </tr>
                    </tbody>
                </table>
                <para>
                    This operation does not require a request body.
                </para>
                <example>
                    <title>List Connection Logging Configuration Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-logging-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Connection Logging Configuration Response: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-list-logging-response.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Enable Connection Logging Request: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-enable-logging-request.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Enable Connection Logging Request: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-enable-logging-request.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
            <section xml:id="Throttle_Connections-d1e4057">
                <title>Throttle Connections</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td>Verb</td>
                            <td>URI</td>
                            <td>Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td>&GET;
                            </td>
                            <td>/loadbalancers/loadBalancerId/connectionthrottle</td>
                            <td>List connection throttling configuration.</td>
                        </tr>
                        <tr align="left">
                            <td>&PUT;
                            </td>
                            <td>/loadbalancers/loadBalancerId/connectionthrottle</td>
                            <td>Update throttling configuration.</td>
                        </tr>
                        <tr align="left">
                            <td>&DELETE;
                            </td>
                            <td>/loadbalancers/loadBalancerId/connectionthrottle</td>
                            <td>Remove connection throttling configurations.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>This operation does not require a request body.</para>
                <para> The connection throttling feature imposes
                    limits on the number of connections per IP address
                    to help mitigate malicious or abusive traffic to
                    your applications. The attributes in the table
                    that follows can be configured based on the
                    traffic patterns for your sites. </para>
                <para>The following table lists the required and
                    optional attributes for Update Throttling
                    Configuration:</para>
                <table rules="all">
                    <caption>Required and Optional Attributes for
                        Update Throttling Configuration</caption>
                    <thead>
                        <tr>
                            <td colspan="1">Name </td>
                            <td colspan="3">Description</td>
                            <td colspan="1">Required</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="1">maxConnectionRate</td>
                            <td colspan="3">Maximum number of
                                connections allowed from a single IP
                                address in the defined
                                   <code>rateInterval</code>. Setting
                                a value of 0 allows an unlimited
                                connection rate; otherwise, set a
                                value between 1 and 100000. </td>
                            <td colspan="1">No</td>
                        </tr>
                        <tr>
                            <td colspan="1">maxConnections</td>
                            <td colspan="3">Maximum number of
                                connections to allow for a single IP
                                address. Setting a value of 0 will
                                allow unlimited simultaneous
                                connections; otherwise set a value
                                between 1 and 100000.</td>
                            <td colspan="1">No</td>
                        </tr>
                        <tr>
                            <td colspan="1">minConnections</td>
                            <td colspan="3">Allow at least this number
                                of connections per IP address before
                                applying throttling restrictions.
                                Setting a value of 0 allows unlimited
                                simultaneous connections; otherwise,
                                set a value between 1 and 1000. </td>
                            <td colspan="1">No</td>
                        </tr>
                        <tr>
                            <td colspan="1">rateInterval</td>
                            <td colspan="3">
                                <para>Frequency (in seconds) at which
                                   the <code>maxConnectionRate</code>
                                   is assessed. For example, a
                                   <code>maxConnectionRate</code> of
                                   30 with a <code>rateInterval</code>
                                   of 60 would allow a maximum of 30
                                   connections per minute for a single
                                   IP address. This value must be between 1 and 3600. </para>
                            </td>
                            <td colspan="1">No</td>
                        </tr>
                        
                    </tbody>
                </table>
                <note>
                    <para> You need to specify all of the attributes
                        when initially creating the connection
                        throttle, however when you update an existing
                        setting you can pass as few as one attribute. </para>
                </note>
                <example>
                    <title>List Connection Throttling Configuration Response: XML</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-throttling-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Connection Throttling Configuration Response: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-list-throttling-response.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Update Connection Throttling Configuration Request: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-update-throttling-request.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Update Connection Throttling Configuration Request: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-update-throttling-request.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Atom Connection Throttling Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-atom-feed-by-connectionthrottle.xml" parse="text"/>
                    </programlisting>
                </example>
            </section>
        </section>
        <section xml:id="ContentCaching-d1e3358">
            <title>Content Caching</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&GET;
                            </td>
                            <td colspan="3">/loadbalancers/loadBalancerId/contentcaching</td>
                            <td colspan="3">View current configuration of content caching.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&PUT;
                            </td>
                            <td colspan="3">/loadbalancers/loadBalancerId/contentcaching</td>
                            <td colspan="3">Enable or disable content caching.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>,
                    <returnvalue>202</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>This operation allows the user to view the current content caching
                    configuration, enable content caching, or disable content caching.
                </para>
            <para>When content caching is enabled, recently-accessed
                files are stored on the load balancer for easy
                retrieval by web clients. Content caching improves the
                performance of high traffic web sites by temporarily
                storing data that was recently accessed. While it's
                cached, requests for that data will be served by the
                load balancer, which in turn reduces load off the back
                end nodes. The result is improved response times for
                those requests and less load on the web server.</para>
            <para>For more information about content caching, refer to
                the following Knowledge Center article: <link
                    xlink:href="http://www.rackspace.com/knowledge_center/content/content-caching-cloud-load-balancers"
                    >Content Caching for Cloud Load
                Balancers</link>.</para>
                <para>This operation does not require a request body for GET requests. </para>
                <example>
                    <title>List Content Caching Configuration Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-content-caching-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Content Caching Configuration Response: JSON</title>
                    <programlisting language="javascript">
<xi:include href="samples/lb-list-content-caching-response.json" parse="text"/>
                    </programlisting>
                </example>

            <para> You must supply a body for PUT requests. Please see
                the following examples:</para>
                <example>
                    <title>Enable Content Caching PUT Request: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-enable-content-caching-request.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Enable Content Caching PUT Request: JSON</title>
                    <programlisting language="javascript">
<xi:include href="samples/lb-enable-content-caching-request.json" parse="text"/>
                    </programlisting>
                </example>
        </section>
        <section xml:id="Protocols-d1e4264">
            <title>Protocols</title>
            <section xml:id="List_Load_Balancing_Protocols-d1e4269">
                <title>List Load Balancing Protocols</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td>Verb</td>
                            <td>URI</td>
                            <td>Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td>&GET;
                            </td>
                            <td>/loadbalancers/protocols</td>
                            <td>List all supported load balancing protocols.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>
                    This operation does not require a request body.
                </para>
                <para>All load balancers must define the protocol of the service which is being load
                    balanced. The protocol selection should be based on the protocol of the back-end
                    nodes. When configuring a load balancer, the default port for the given protocol
                    will be selected unless otherwise specified.
                </para>
                <example>
                    <title>List Load Balancing Protocols Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-protocols-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Load Balancing Protocols Response: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-list-protocols-response.json" parse="text"/>
                    </programlisting>
                </example>
                <note><para>UDP-based protocols (that is DNS_UDP, UDP, and UDP_STREAM) are
                        not capable of utilizing the Health Monitor
                        features. Also, SSL Termination is unavailable
                        while using UDP-based protocols.</para></note>
                <para>See the table below for descriptions of the
                    protocols.</para>
                <table rules="all">
                    <caption>Load Balancing Protocols</caption>
                    <thead>
                        <tr align="center">
                            <td colspan="2">Name</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="2">
                                <code>DNS_TCP</code>
                            </td>
                            <td colspan="3">This protocol works with
                                IPv6 and allows your DNS server to
                                receive traffic using TCP port 53. </td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>DNS_UDP</code>
                            </td>
                            <td colspan="3">This protocol works with
                                IPv6 and allows your DNS server to
                                receive traffic using UDP port
                                53.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>FTP</code>
                            </td>
                            <td colspan="3">The File Transfer Protocol
                                defines how files are transported over
                                the Internet. It is typically used
                                when downloading or uploading files to
                                or from web servers.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>HTTP</code>
                            </td>
                            <td colspan="3">The Hypertext Transfer
                                Protocol defines how communications
                                occur on the Internet between clients
                                and web servers. For example, if you
                                request a web page in your browser,
                                HTTP defines how the web server
                                fetches the page and returns it your
                                browser.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>HTTPS</code>
                            </td>
                            <td colspan="3">The Hypertext Transfer
                                Protocol over Secure Socket Layer
                                (SSL) provides encrypted communication
                                over the Internet. It securely
                                verifies the authenticity of the web
                                server you are communicating
                                with.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>IMAPS</code>
                            </td>
                            <td colspan="3">The Internet Message
                                Application Protocol over Secure
                                Socket Layer (SSL) defines how an
                                email client, such as Microsoft
                                Outlook, retrieves and transfers email
                                messages with a mail server.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>IMAPv2</code>
                            </td>
                            <td colspan="3">Version 2 of IMAPS.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>IMAPv3</code>
                            </td>
                            <td colspan="3">Version 3 of IMAPS.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>IMAPv4</code>
                            </td>
                            <td colspan="3">Version 4, the current
                                version of IMAPS.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>LDAP</code>
                            </td>
                            <td colspan="3">The Lightweight Directory
                                Access Protocol provides access to
                                distributed directory information
                                services over the Internet. This
                                protocol is typically used to access a
                                large set of hierarchical records,
                                such as corporate email or a telephone
                                directory. </td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>LDAPS</code>
                            </td>
                            <td colspan="3">The Lightweight Directory
                                Access Protocol over Secure Socket
                                Layer (SSL).</td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>MYSQL</code>
                            </td>
                            <td colspan="3">This protocol allows
                                communication with MySQL, an open
                                source database management
                                system.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>POP3</code>
                            </td>
                            <td colspan="3">The Post Office Protocol
                                is one of the two most common
                                protocols for communciation between
                                email clients and email servers.
                                Version 3 is the current standard of
                                POP.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>POP3S</code>
                            </td>
                            <td colspan="3">Post Office Protocol over
                                Secure Socket Layer.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>SFTP</code>
                            </td>
                            <td colspan="3">The SSH File Transfer
                                Protocol is a secure file transfer and
                                management protocol. This protocol
                                assumes the files are using a secure
                                channel, such as SSH, and that the
                                identity of the client is available to
                                the protocol. </td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>SMTP</code>
                            </td>
                            <td colspan="3">The Simple Mail Transfer
                                Protocol is used by electronic mail
                                servers to send and receive email
                                messages. Email clients use this
                                protocol to relay messages to another
                                computer or web server, but use IMAP
                                or POP to send and receive
                                messages.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>TCP</code>
                            </td>
                            <td colspan="3">The Transmission Control
                                Protocol is a part of the Transport
                                Layer protocol and is one of the core
                                protocols of the Internet Protocol
                                Suite. It provides a reliable, ordered
                                delivery of a stream of bytes from one
                                program on a computer to another
                                program on another computer.
                                Applications that require an ordered
                                and reliable delivery of packets use
                                this protocol. </td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>TCP_CLIE
                                   (TCP_CLIENT_FIRST)</code>
                            </td>
                            <td colspan="3">This protocol is similiar
                                to TCP, but is more efficient when a
                                client is expected to write the data
                                first.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>UDP</code>
                            </td>
                            <td colspan="3">TheUser Datagram Protocol
                                provides a datagram service
                                thatemphasizes speed over
                                reliability, It works well with
                                applications that provide security
                                through other measures.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="2">
                                <code>UDP_STRE (UDP_STREAM)</code>
                            </td>
                            <td colspan="3">This protocol is designed
                                to stream media over networks and is
                                built on top of UDP.</td>
                        </tr>
                    </tbody>
                </table>
                <note>
                    <para>UDP-Based protocols (DNS_UDP, UDP, and
                        UDP_STREAM) have the following limitations.
                        They are not capable of using the Health
                        Monitor features. Also, SSL Termination is
                        unavailable when using UDP-based ports.</para>
                </note>
            </section>
        </section>
        <section xml:id="Algorithms-d1e4367">
            <title>Algorithms</title>
            <para>All load balancers utilize an algorithm that defines
                how traffic should be directed between back-end nodes.
                The default algorithm for newly created load balancers
                is <code>RANDOM</code>, which can be overridden at
                creation time or changed after the load balancer has
                been initially provisioned. The algorithm name is to
                be constant within a major revision of the load
                balancing API, though new algorithms may be created
                with a unique algorithm name within a given major
                revision of the service API. </para>
            <table rules="all">
                <caption>Load Balancing Algorithms</caption>
                <thead>
                    <tr align="center">
                        <td colspan="2">Name</td>
                        <td colspan="3">Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="2">
                            <code>LEAST_CONNECTIONS</code>
                        </td>
                        <td colspan="3">The node with the lowest number of connections will receive
                            requests.
                        </td>
                    </tr>
                    <tr align="left">
                        <td colspan="2">
                            <code>RANDOM</code>
                        </td>
                        <td colspan="3">Back-end servers are selected at random.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="2">
                            <code>ROUND_ROBIN</code>
                        </td>
                        <td colspan="3">Connections are routed to each of the back-end servers in turn.</td>
                    </tr>
                    <tr align="left">
                        <td colspan="2">
                            <code>WEIGHTED_LEAST_CONNECTIONS</code>
                        </td>
                        <td colspan="3">Each request will be assigned to a node based on the number of
                            concurrent connections to the node and its weight.
                        </td>
                    </tr>
                    <tr align="left">
                        <td colspan="2">
                            <code>WEIGHTED_ROUND_ROBIN</code>
                        </td>
                        <td colspan="3">A round robin algorithm, but with different proportions of traffic
                            being directed to the back-end nodes. Weights must be defined as part of
                            the load balancer's node configuration.
                        </td>
                    </tr>
                </tbody>
            </table>
            <section xml:id="List_Load_Balancing_Algorithms-d1e4459">
                <title>List Load Balancing Algorithms</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&GET;
                            </td>
                            <td colspan="3">/loadbalancers/algorithms</td>
                            <td colspan="3">List all supported load balancing algorithms.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>
                    This operation does not require a request body.
                </para>
                <example>
                    <title>List Load Balancing Algorithms Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-algorithms-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Load Balancing Algorithms Response: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-list-algorithms-response.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
        </section>
        <section xml:id="SSLTermination-d1e2479">
            <title>SSL Termination</title>
            <note>
                <para>SSL termination should not be used when
                    transferring certain types of Personally
                    Identifiable Information (PII). For the definition
                    of PII, see the Knowledge Center article at: <link
                        xlink:href="http://www.rackspace.com/knowledge_center/article/definition-of-personally-identifiable-information-pii"
                        >http://www.rackspace.com/knowledge_center/article/definition-of-personally-identifiable-information-pii</link>.</para>
            </note>
            <informaltable rules="all">
                <thead>
                    <tr align="center">
                        <td>Verb</td>
                        <td>URI</td>
                        <td>Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td>&GET; </td>
                        <td>/loadbalancers/<parameter>loadBalancerId</parameter>/ssltermination</td>
                        <td>View the load balancers SSL termination configuration.</td>
                    </tr>
                    <tr align="left">
                        <td>&PUT; </td>
                        <td>/loadbalancers/<parameter>loadBalancerId</parameter>/ssltermination</td>
                        <td>Update/configure SSL termination.</td>
                    </tr>
                    <tr align="left">
                        <td>&DELETE; </td>
                        <td>/loadbalancers/<parameter>loadBalancerId</parameter>/ssltermination</td>
                        <td>Remove SSL termination.</td>
                    </tr>
                </tbody>
            </informaltable>
            <para> Normal Response Code(s):
                    <returnvalue>202</returnvalue>
            </para>
            <simpara>Error Response Code(s): loadbalancerFault
                    (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable
                    (<errorcode>503</errorcode>), unauthorized
                    (<errorcode>401</errorcode>), badRequest
                    (<errorcode>400</errorcode>), overLimit
                    (<errorcode>413</errorcode>), itemNotFound
                    (<errorcode>404</errorcode>), unprocessableEntity
                    (<errorcode>422</errorcode>)</simpara>
            <para> The SSL Termination feature allows a load balancer
                user to terminate SSL traffic at the load balancer
                layer versus at the web server layer.A user may
                choose to configure SSL Termination using a key and an
                SSL certificate or an (Intermediate) SSL
                certificate.</para>
            <para> When SSL Termination is configured on a load
                balancer, a secure shadow server is created that
                listens only for secure traffic on a user-specified
                port. This shadow server is only visible to and
                manageable by the system. Existing or updated
                attributes on a load balancer with SSL Termination
                will also apply to its shadow server. For example, if
                Connection Logging is enabled on an SSL load balancer,
                it will also be enabled on the shadow server and Cloud
                Files logs will contain log files for both. </para>
            <note><title>Notes</title>
                <itemizedlist>
                    <listitem>
                        <para>SSL Termination may only be configured
                            on load balancers with non-secure
                            protocols. For example, SSL Termination
                            can be applied to an HTTP load balancer,
                            but not to an HTTPS load balancer. </para>
                    </listitem>
                    <listitem>
                        <para>SSL-terminated load balancers decrypt
                            the traffic at the traffic manager and
                            pass unencrypted traffic to the back-end
                            node. Because of this, the customer's
                            back-end nodes don't know what protocol
                            the client requested. Therefore the
                            X-Forwarded-Proto (XFP) header has been
                            added for identifying the originating
                            protocol of an HTTP request as "http" or
                            "https" depending on what protocol the
                            client requested.</para>
                    </listitem>
                    <listitem>
                        <para>Not every service will return
                            certificates in the proper order. Please
                            verify that your chain of certificates
                            matches that of walking up the chain from
                            the domain to the CA root.</para>
                    </listitem>
                </itemizedlist>
            </note>
            <warning>
                <para>If SSL is enabled on a load balancer that is
                    configured with nodes that are NOT in the same
                    datacenter, then decrypted traffic will be sent in
                    clear text over the public internet to the
                    external node(s) and will no longer be
                    secure.</para>
            </warning>
            <para>A combination of the following required and optional
                attributes can be used to create the desired SSL
                configuration per load balancer: </para>
            <para>The following table lists the required and optional
                attributes for Update/Configure SSL
                Termination:</para>
            <table rules="all" >
                <caption>Required and Optional Attributes for
                    Update/Configure SSL Termination</caption>
                
                <thead>
                    <tr align="center">
                        <td colspan="1">Name</td>
                        <td colspan="1">Default</td>
                        <td colspan="2">Description</td>
                        <td colspan="1">Required</td>
                    </tr>
                </thead>
                <tbody>
                    <tr align="left">
                        <td colspan="1">
                            <code>securePort</code>
                        </td>
                        <td colspan="1"> N/A </td>
                        <td colspan="2">
                            <para>The port on which the SSL
                                termination load balancer will listen
                                for secure traffic. </para>
                            <para> The securePort must be unique to
                                the existing LB protocol/port
                                combination. For example, port 443.
                            </para>
                        </td>
                        <td colspan="1"> Yes </td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">
                            <code>privatekey</code>
                        </td>
                        <td colspan="1"> N/A </td>
                        <td colspan="2">
                            <para>The private key for the SSL
                                certificate. </para>
                            <para>The private key is validated and
                                verified against the provided
                                certificate(s).</para>
                        </td>
                        <td colspan="1"> Yes </td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">
                            <code>certificate</code>
                        </td>
                        <td colspan="1"> N/A </td>
                        <td colspan="2">
                            <para>The certificate used for SSL
                                termination. </para>
                            <para>The certificate is validated and
                                verified against the key and
                                intermediate certificate if
                                provided.</para>
                        </td>
                        <td colspan="1"> Yes </td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">
                            <code>intermediatecerti<?sbr?>fi<?sbr?>cate</code>
                        </td>
                        <td colspan="1"> N/A </td>
                        <td colspan="2">
                            <para>The user's intermediate certificate
                                used for SSL termination. </para>
                            <para>The intermediate certificate is
                                validated and verified against the key
                                and certificate credentials
                                provided.</para>
                        </td>
                        <td colspan="1">Yes, only when configuring
                            Intermediate SSL Termination [a]</td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">
                            <code>enabled</code>
                        </td>
                        <td colspan="1">
                            <code>true</code>
                        </td>
                        <td colspan="2">
                            <para>Determines if the load balancer is
                                enabled to terminate SSL traffic. </para>
                            <para> If <code>enabled</code> =
                                   <code>false</code>, the load
                                balancer will retain its specified SSL
                                attributes, but will
                                   <emphasis>not</emphasis> terminate
                                SSL traffic.</para>
                        </td>
                        <td colspan="1"> No </td>
                    </tr>
                    <tr align="left">
                        <td colspan="1">
                            <code>secureTrafficOnly</code>
                        </td>
                        <td colspan="1">
                            <code>false</code>
                        </td>
                        <td colspan="2">
                            <para>Determines if the load balancer may
                                accept <emphasis>only</emphasis>
                                secure traffic. </para>
                            <para> If <code>secureTrafficOnly</code> =
                                   <code>true</code>, the load
                                balancer will <emphasis>not</emphasis>
                                accept non-secure traffic. </para>
                        </td>
                        <td colspan="1"> No </td>
                    </tr>
                    <tr align="left">
                        <td colspan="5">
                            <para>[a] A user may only provide an
                                intermediateCertificate when
                                accompanied by a certificate, private
                                key, and securePort. It may not be
                                added to an existing SSL configuration
                                as a single attribute in a future
                                request. </para>
                        </td>
                    </tr>
                </tbody>
            </table>
            <simplesect>
                <title>Update SSL Termination</title>
                <para>The following attributes may be updated without
                    overwriting a load balancers existing SSL
                    certificate and key specifications:</para>
                <itemizedlist>
                    <listitem>
                        <para>
                            <code>enabled</code>
                        </para>
                    </listitem>
                    <listitem>
                        <para><code>secureTrafficOnly</code></para>
                    </listitem>
                    <listitem>
                        <para><code>securePort</code></para>
                    </listitem>
                </itemizedlist>
                <para> These configurable attributes must be provided
                    (individually or grouped) in a request
                        <emphasis>without</emphasis> specifying any
                    certificate/key combination if a user does
                        <emphasis>not</emphasis> want the system to
                    overwrite the existing SSL certificate/key
                    configuration. </para>
                <para>If a user wants to replace the existing SSL
                    configuration, a new certificate, key, and
                    securePort combination must be provided instead
                    of, or in addition to, the optional/editable
                    attributes. </para>
                <table rules="all">
                    <?dbfo keep-together="always"?>
                    <caption> Optional SSL Attributes</caption>
                    <thead>
                        <tr align="center">
                            <td>Optional SSL Attributes</td>
                            <td>Non-SSL Traffic</td>
                            <td>SSL Traffic</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td><code>enabled</code> =
                                   <code>true</code> (default)</td>
                            <td> Yes </td>
                            <td> Yes </td>
                        </tr>
                        <tr align="left">
                            <td><code>enabled</code> =
                                   <code>false</code></td>
                            <td> Yes </td>
                            <td> No </td>
                        </tr>
                        <tr align="left">
                            <td><code>secureTrafficOnly</code> =
                                   <code>true</code></td>
                            <td> No </td>
                            <td> Yes </td>
                        </tr>
                        <tr align="left">
                            <td>
                                <code>secureTrafficOnly</code> =
                                   <code>false</code> (default) </td>
                            <td> Yes </td>
                            <td> Yes </td>
                        </tr>
                        <tr align="left">
                            <td>
                                <para><code>enabled</code> =
                                   <code>true</code></para>
                                <para><code>secureTrafficOnly</code> =
                                   <code>true</code></para>
                            </td>
                            <td> No </td>
                            <td> Yes </td>
                        </tr>
                        <tr align="left">
                            <td>
                                <para><code>enabled</code> =
                                   <code>true</code></para>
                                <para><code>secureTrafficOnly</code> =
                                   <code>false</code></para>
                            </td>
                            <td> Yes </td>
                            <td> Yes </td>
                        </tr>
                        <tr align="left">
                            <td>
                                <para><code>enabled</code> =
                                   <code>false</code></para>
                                <para><code>secureTrafficOnly</code> =
                                   <code>false</code></para>
                            </td>
                            <td> Yes </td>
                            <td> No </td>
                        </tr>
                        <tr align="left">
                            <td>
                                <para><code>enabled</code> =
                                   <code>false</code></para>
                                <para><code>secureTrafficOnly</code> =
                                   <code>true</code></para>
                            </td>
                            <td> Yes </td>
                            <td> No </td>
                        </tr>
                    </tbody>
                </table>
                <para>The examples to view the load balancers SSL
                    termination configuration are shown below:</para>
                <example>
                    <title>View Load Balancing SSL Termination
                        Configuration Response: XML</title>
                    
                    <programlisting language="xml">
<xi:include href="samples/lb-ssl-termination-response.xml" parse="text"/>
                    </programlisting>
                </example>
                
                <example>
                    <title>View Load Balancing SSL Termination
                        Configuration Response: JSON</title>
                    
                    <programlisting language="json">
<xi:include href="samples/lb-ssl-termination-response.json" parse="text"/>
                    </programlisting>
                </example>
                <note>
                    <para>All requests to SSL termination in the JSON
                        format require the key/certificates to be in
                        "proper" JSON format, meaning that all raw
                        line feed characters should be wrapped in a
                        newline character. So if the user pastes in
                        the key from a <filename>mykey.key</filename>
                        file, JSON will not properly handle the field.
                        The key/certificates can be wrapped in a
                        newline character in Java, for example, using
                            <code>string.replaceAll("\n",
                            "\\n")</code>. Please refer to the
                        examples above for working, "pre-formatted"
                        examples. </para>
                </note>
                <para>The examples to update the load balancers SSL
                    termination full certification request are shown
                    below:</para>
                
                <example>
                    <title>Update Load Balancing SSL Termination Full
                        Certification Request: XML</title>
                    
                    <programlisting language="xml">
<xi:include href="samples/lb-ssl-termination-request.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Update Load Balancing SSL Termination Full
                        Certification Request: JSON</title>
                    
                    <programlisting language="json">
<xi:include href="samples/lb-ssl-termination-request.json" parse="text"/>
                    </programlisting>
                </example>
                <para>The examples to update the load balancers SSL
                    termination attribute request are shown
                    below:</para>
                <example>
                    <title>Update Load Balancing SSL Termination
                        Attribute Request: XML</title>
                    
                    <programlisting language="xml">
<xi:include href="samples/lb-ssl-termination-request-attrs.xml" parse="text"/>
                </programlisting>
                </example>
                <example>
                    <title>Update Load Balancing SSL Termination
                        Attribute Request: JSON</title>
                    
                    <programlisting language="json">
<xi:include href="samples/lb-ssl-termination-request-attrs.json" parse="text"/>
                </programlisting>
                </example>
                <para>There is no example for the Delete Load
                    Balancing SSL Termination Request. </para>
                <para>This operation does not require a request
                    body.</para>
                <para>This operation does not return a response
                    body.</para>
            </simplesect>
        </section>

        <section xml:id="Metadata-d1e2173">
            <title>Metadata</title>
            <para>Metadata can be associated with each load balancer
                and each node for the client's personal use. It is
                defined using key-value pairs where the key and value
                consist of alphanumeric characters. A key is unique
                per load balancer. </para>

            <section xml:id="List_Metadata-d1e2218">
                <title>List Metadata</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">
                                &GET;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/metadata
                            </td>
                            <td colspan="3">List all metadata
                                associated with the specified load
                                balancer.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                &GET;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/metadata/<parameter>metaId</parameter>
                            </td>
                            <td colspan="3">List details of a specific
                                metadata item for the specified load
                                balancer.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                &GET;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/nodes/<parameter>nodeId</parameter>/metadata
                            </td>
                            <td colspan="3">List all metadata
                                associated with the specified node and
                                load balancer.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">
                                &GET;
                            </td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/nodes/<parameter>nodeId</parameter>/metadata/<parameter>metaId</parameter>
                            </td>
                            <td colspan="3">List details for a
                                specific metadata item for the
                                specified node and load balancer.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>
                    This operation does not require a request body.
                </para>
                <example>
                    <title>List Specific Metadata Response:
                        XML</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-meta-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List Specific Metadata Response:
                        JSON</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="json">
<xi:include href="samples/lb-list-meta-response.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List All Metadata Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-list-metadata-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>List All Metadata Response: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-list-metadata-response.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
            <section xml:id="Add_Metadata-d1e2379">
                <title>Add Metadata</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&POST;</td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/metadata</td>
                            <td colspan="3">Add a new metadata item to the load balancer.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&POST;</td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/nodes/<parameter>nodeId</parameter>/metadata</td>
                            <td colspan="3">Add a new metadata item to the node.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para>When a metadata item is added, it is assigned a unique identifier that can be used
                    for mutating operations such as changing the value attribute or removing it.
                </para>
                <para>The following table lists the required and
                    optional attributes for Add Metadata:</para>
                <table rules="all">
                    <caption>Required and Optional Attributes for Add
                        Metadata</caption>
                    <thead>
                        <tr>
                            <td colspan="1">Name </td>
                            <td colspan="3">Description</td>
                            <td colspan="1">Required</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="1">key</td>
                            <td colspan="3">Key that is used to
                                identify the metadata. Must be 256
                                characters or less. All UTF-8
                                characters are valid. Refer to <link
                                   xlink:href="http://www.utf8-chartable.de/"
                                   >
                                   http://www.utf8-chartable.de/</link>
                                for information about the UTF-8
                                character set.</td>
                            <td colspan="1">Yes</td>
                        </tr>
                        <tr>
                            <td colspan="1">value</td>
                            <td colspan="3">
                                <para>Value for the metadata item.
                                   Must be 256 characters or less. All
                                   UTF-8 characters are valid.</para>
                            </td>
                            <td colspan="1">Yes</td>
                        </tr>
                    </tbody>
                </table>
                <example>
                    <title>Add Metadata Request: XML</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="xml">
<xi:include href="samples/lb-add-metadata-request.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Add Metadata Request: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-add-metadata-request.json" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Add Metadata Response: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-add-metadata-response.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Add Metadata Response: JSON</title>
                    <?dbfo keep-together="always"?>
                    <programlisting language="json">
<xi:include href="samples/lb-add-metadata-response.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
            <section xml:id="Modify_Metadata-d1e2503">
                <title>Modify Metadata</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&PUT;</td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/metadata/<parameter>metaId</parameter></td>
                            <td colspan="3">Modify the configuration of a metadata item on the load balancer.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&PUT;</td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/nodes/<parameter>nodeId</parameter>/metadata/<parameter>metaId</parameter></td>
                            <td colspan="3">Modify the configuration of a metadata item on the node.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <note>
                    <para>The meta data item's id and key are immutable attributes and cannot be modified
                        with a &PUT; request. Supplying an unsupported attribute will result in a
                        <returnvalue>400 (badRequest)</returnvalue>
                        fault. A load balancer and a node supports
                        a maximum of 25 metadata items.
                    </para>
                </note>
                <para>The following table lists the required and
                    optional attributes for Modify Metadata:</para>
                <table rules="all">
                    <caption>Required and Optional Attributes for
                        Modify Metadata</caption>
                    <thead>
                        <tr>
                            <td colspan="1">Name </td>
                            <td colspan="3">Description</td>
                            <td colspan="1">Required</td>
                        </tr>
                    </thead>
                    <tbody>
                        
                        <tr>
                            <td colspan="1">value</td>
                            <td colspan="3">
                                <para>Value for the metadata item.
                                   Must be 256 characters or less. All
                                   UTF-8 characters are valid. Refer
                                   to <link
                                   xlink:href="http://www.utf8-chartable.de/"
                                   >
                                   http://www.utf8-chartable.de/</link>
                                   for information about the UTF-8
                                   character set.</para>
                            </td>
                            <td colspan="1">Yes</td>
                        </tr>
                    </tbody>
                </table>
                <example>
                    <title>Update Metadata Value Request: XML</title>
                    <programlisting language="xml">
<xi:include href="samples/lb-update-meta-request.xml" parse="text"/>
                    </programlisting>
                </example>
                <example>
                    <title>Update Metadata Value Request: JSON</title>
                    <programlisting language="json">
<xi:include href="samples/lb-update-meta-request.json" parse="text"/>
                    </programlisting>
                </example>
            </section>
            <section xml:id="Remove_Metadata-d1e2675">
                <title>Remove Metadata</title>
                <informaltable rules="all">
                    <thead>
                        <tr align="center">
                            <td colspan="1">Verb</td>
                            <td colspan="3">URI</td>
                            <td colspan="3">Description</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr align="left">
                            <td colspan="1">&DELETE;</td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/metadata/<parameter>metaId</parameter></td>
                            <td colspan="3">Remove a metadata item from the load balancer.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&BATCH_DELETE;</td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/metadata?id=<parameter>metaId</parameter>&amp;id=<parameter>metaId</parameter></td>
                            <td colspan="3">Batch delete the metadata items given specified id list.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&DELETE;</td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/nodes/<parameter>nodeId</parameter>/metadata/<parameter>metaId</parameter></td>
                            <td colspan="3">Remove a metadata item from the node.</td>
                        </tr>
                        <tr align="left">
                            <td colspan="1">&BATCH_DELETE;</td>
                            <td colspan="3">/loadbalancers/<parameter>loadBalancerId</parameter>/nodes/<parameter>nodeId</parameter>/metadata?id=<parameter>metaId</parameter>&amp;id=<parameter>metaId</parameter></td>
                            <td colspan="3">Batch delete the metadata items given specified id list.</td>
                        </tr>
                    </tbody>
                </informaltable>
                <para>
                    Normal Response Code(s):
                    <returnvalue>200</returnvalue>
                </para>
                <simpara>Error Response Code(s): loadbalancerFault (<errorcode>400</errorcode>,
                    <errorcode>500</errorcode>), serviceUnavailable (<errorcode>503</errorcode>),
                    unauthorized (<errorcode>401</errorcode>), badRequest (<errorcode>400</errorcode>),
                    overLimit (<errorcode>413</errorcode>)
                </simpara>
                <para> This operation does not require a request body.
                    To batch delete metadata, provide a query
                    parameter list of meta ids. For example:
                        /metadata?id=<parameter>metaId</parameter>&amp;id=
                        <parameter>metaId</parameter>. The current
                    default limit is ten ids per request. Any and all
                    configuration data is immediately purged and is
                    not recoverable. By chance if one of the items in
                    the list cannot be removed due to its current
                    status,  a 400:BadRequest is returned along with
                    the ids of the ones the system identified as
                    potential failures for this request. </para>
            </section>
        </section>

    </chapter>
    <glossary>
        <title>Glossary</title>
        <glossentry xml:id="Connection-Logging-Gloss-d1e022">
            <glossterm>connection logging</glossterm>
            <glossdef>
                <para>The connection logging feature allows logs to be
                    delivered to a Cloud Files account every hour. For
                    HTTP-based protocol traffic, these are
                    Apache-style access logs. For all other traffic,
                    this is connection and transfer logging.</para>
            </glossdef>
        </glossentry>
        <glossentry xml:id="Error-Page-d1e018">
            <glossterm>error page</glossterm>
            <glossdef>
                <para>An error page is the html file that is shown to
                    the end user when an error in the service has been
                    thrown. By default every virtual server is
                    provided with the default error file. It is also
                    possible to submit a custom error page via the
                    Load Balancers API.</para>
            </glossdef>
        </glossentry>
        <glossentry xml:id="Health-Monitor-d1e020">
            <glossterm>health monitor</glossterm>
            <glossdef>
                <para>A health monitor is a configurable feature of
                    each load balancer. It is used to determine
                    whether or not a back-end node is usable for
                    processing a request. The load balancing service
                    currently supports active health
                    monitoring.</para>
            </glossdef>
        </glossentry>
        <glossentry xml:id="LoadBalancer-d1e017">
            <glossterm>load balancer</glossterm>
            <glossdef>
                <para>A load balancer is a logical device which belongs to a cloud account. It is used to distribute
                    workloads between multiple back-end systems or services, based on the criteria defined as
                    part of its configuration.</para>
            </glossdef>
        </glossentry>
        <glossentry xml:id="Node-d1e019">
            <glossterm>node</glossterm>
            <glossdef>
                <para>A node is a back-end device providing a service on a specified IP and port.</para>
            </glossdef>
        </glossentry>
        <glossentry xml:id="Session-Persistence-d1e021">
            <glossterm>session persistence</glossterm>
            <glossdef>
                <para>Session persistence is a feature of the load balancing service. It attempts to force
                    subsequent connections to a service to be redirected to the same node as long as it is
                    online.</para>
            </glossdef>
        </glossentry>
        <glossentry xml:id="Virtual-IP-d1e016">
            <glossterm>virtual IP</glossterm>
            <glossdef>
                <para>A virtual IP is an Internet Protocol (IP)
                    address configured on the load balancer for use by
                    clients connecting to a service that is load
                    balanced. Incoming connections are distributed to
                    back-end nodes based on the configuration of the
                    load balancer.</para>
            </glossdef>
        </glossentry>
    </glossary>
</book>
